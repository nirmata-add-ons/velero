---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "restores.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "Restore"
    listKind: "RestoreList"
    plural: "restores"
    shortNames: []
    singular: "restore"
  versions:
  - name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: "Restore is a Velero resource that represents the application\
          \ of resources from a Velero backup to a target Kubernetes cluster."
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "RestoreSpec defines the specification for a Velero restore."
            type: "object"
            properties:
              scheduleName:
                description: "ScheduleName is the unique name of the Velero schedule\
                  \ to restore from. If specified, and BackupName is empty, Velero\
                  \ will restore from the most recent successful backup created from\
                  \ this schedule."
                type: "string"
              namespaceMapping:
                description: "NamespaceMapping is a map of source namespace names\
                  \ to target namespace names to restore into. Any source namespaces\
                  \ not included in the map will be restored into namespaces of the\
                  \ same name."
                additionalProperties:
                  type: "string"
                type: "object"
              excludedResources:
                nullable: true
                description: "ExcludedResources is a slice of resource names that\
                  \ are not included in the restore."
                type: "array"
                items:
                  type: "string"
              labelSelector:
                nullable: true
                description: "LabelSelector is a metav1.LabelSelector to filter with\
                  \ when restoring individual objects from the backup. If empty or\
                  \ nil, all objects are included. Optional."
                type: "object"
                properties:
                  matchExpressions:
                    description: "matchExpressions is a list of label selector requirements.\
                      \ The requirements are ANDed."
                    type: "array"
                    items:
                      description: "A label selector requirement is a selector that\
                        \ contains values, a key, and an operator that relates the\
                        \ key and values."
                      type: "object"
                      properties:
                        values:
                          description: "values is an array of string values. If the\
                            \ operator is In or NotIn, the values array must be non-empty.\
                            \ If the operator is Exists or DoesNotExist, the values\
                            \ array must be empty. This array is replaced during a\
                            \ strategic merge patch."
                          type: "array"
                          items:
                            type: "string"
                        key:
                          description: "key is the label key that the selector applies\
                            \ to."
                          type: "string"
                        operator:
                          description: "operator represents a key's relationship to\
                            \ a set of values. Valid operators are In, NotIn, Exists\
                            \ and DoesNotExist."
                          type: "string"
                      required:
                      - "key"
                      - "operator"
                  matchLabels:
                    description: "matchLabels is a map of {key,value} pairs. A single\
                      \ {key,value} in the matchLabels map is equivalent to an element\
                      \ of matchExpressions, whose key field is \"key\", the operator\
                      \ is \"In\", and the values array contains only \"value\". The\
                      \ requirements are ANDed."
                    additionalProperties:
                      type: "string"
                    type: "object"
              includedNamespaces:
                nullable: true
                description: "IncludedNamespaces is a slice of namespace names to\
                  \ include objects from. If empty, all namespaces are included."
                type: "array"
                items:
                  type: "string"
              restoreStatus:
                nullable: true
                description: "RestoreStatus specifies which resources we should restore\
                  \ the status field. If nil, no objects are included. Optional."
                type: "object"
                properties:
                  excludedResources:
                    nullable: true
                    description: "ExcludedResources specifies the resources to which\
                      \ will not restore the status."
                    type: "array"
                    items:
                      type: "string"
                  includedResources:
                    nullable: true
                    description: "IncludedResources specifies the resources to which\
                      \ will restore the status. If empty, it applies to all resources."
                    type: "array"
                    items:
                      type: "string"
              includeClusterResources:
                nullable: true
                description: "IncludeClusterResources specifies whether cluster-scoped\
                  \ resources should be included for consideration in the restore.\
                  \ If null, defaults to true."
                type: "boolean"
              preserveNodePorts:
                nullable: true
                description: "PreserveNodePorts specifies whether to restore old nodePorts\
                  \ from backup."
                type: "boolean"
              restorePVs:
                nullable: true
                description: "RestorePVs specifies whether to restore all included\
                  \ PVs from snapshot (via the cloudprovider)."
                type: "boolean"
              orLabelSelectors:
                nullable: true
                description: "OrLabelSelectors is list of metav1.LabelSelector to\
                  \ filter with when restoring individual objects from the backup.\
                  \ If multiple provided they will be joined by the OR operator. LabelSelector\
                  \ as well as OrLabelSelectors cannot co-exist in restore request,\
                  \ only one of them can be used"
                type: "array"
                items:
                  description: "A label selector is a label query over a set of resources.\
                    \ The result of matchLabels and matchExpressions are ANDed. An\
                    \ empty label selector matches all objects. A null label selector\
                    \ matches no objects."
                  type: "object"
                  properties:
                    matchExpressions:
                      description: "matchExpressions is a list of label selector requirements.\
                        \ The requirements are ANDed."
                      type: "array"
                      items:
                        description: "A label selector requirement is a selector that\
                          \ contains values, a key, and an operator that relates the\
                          \ key and values."
                        type: "object"
                        properties:
                          values:
                            description: "values is an array of string values. If\
                              \ the operator is In or NotIn, the values array must\
                              \ be non-empty. If the operator is Exists or DoesNotExist,\
                              \ the values array must be empty. This array is replaced\
                              \ during a strategic merge patch."
                            type: "array"
                            items:
                              type: "string"
                          key:
                            description: "key is the label key that the selector applies\
                              \ to."
                            type: "string"
                          operator:
                            description: "operator represents a key's relationship\
                              \ to a set of values. Valid operators are In, NotIn,\
                              \ Exists and DoesNotExist."
                            type: "string"
                        required:
                        - "key"
                        - "operator"
                    matchLabels:
                      description: "matchLabels is a map of {key,value} pairs. A single\
                        \ {key,value} in the matchLabels map is equivalent to an element\
                        \ of matchExpressions, whose key field is \"key\", the operator\
                        \ is \"In\", and the values array contains only \"value\"\
                        . The requirements are ANDed."
                      additionalProperties:
                        type: "string"
                      type: "object"
              excludedNamespaces:
                nullable: true
                description: "ExcludedNamespaces contains a list of namespaces that\
                  \ are not included in the restore."
                type: "array"
                items:
                  type: "string"
              backupName:
                description: "BackupName is the unique name of the Velero backup to\
                  \ restore from."
                type: "string"
              hooks:
                description: "Hooks represent custom behaviors that should be executed\
                  \ during or post restore."
                type: "object"
                properties:
                  resources:
                    type: "array"
                    items:
                      description: "RestoreResourceHookSpec defines one or more RestoreResrouceHooks\
                        \ that should be executed based on the rules defined for namespaces,\
                        \ resources, and label selector."
                      type: "object"
                      properties:
                        excludedResources:
                          nullable: true
                          description: "ExcludedResources specifies the resources\
                            \ to which this hook spec does not apply."
                          type: "array"
                          items:
                            type: "string"
                        labelSelector:
                          nullable: true
                          description: "LabelSelector, if specified, filters the resources\
                            \ to which this hook spec applies."
                          type: "object"
                          properties:
                            matchExpressions:
                              description: "matchExpressions is a list of label selector\
                                \ requirements. The requirements are ANDed."
                              type: "array"
                              items:
                                description: "A label selector requirement is a selector\
                                  \ that contains values, a key, and an operator that\
                                  \ relates the key and values."
                                type: "object"
                                properties:
                                  values:
                                    description: "values is an array of string values.\
                                      \ If the operator is In or NotIn, the values\
                                      \ array must be non-empty. If the operator is\
                                      \ Exists or DoesNotExist, the values array must\
                                      \ be empty. This array is replaced during a\
                                      \ strategic merge patch."
                                    type: "array"
                                    items:
                                      type: "string"
                                  key:
                                    description: "key is the label key that the selector\
                                      \ applies to."
                                    type: "string"
                                  operator:
                                    description: "operator represents a key's relationship\
                                      \ to a set of values. Valid operators are In,\
                                      \ NotIn, Exists and DoesNotExist."
                                    type: "string"
                                required:
                                - "key"
                                - "operator"
                            matchLabels:
                              description: "matchLabels is a map of {key,value} pairs.\
                                \ A single {key,value} in the matchLabels map is equivalent\
                                \ to an element of matchExpressions, whose key field\
                                \ is \"key\", the operator is \"In\", and the values\
                                \ array contains only \"value\". The requirements\
                                \ are ANDed."
                              additionalProperties:
                                type: "string"
                              type: "object"
                        name:
                          description: "Name is the name of this hook."
                          type: "string"
                        includedNamespaces:
                          nullable: true
                          description: "IncludedNamespaces specifies the namespaces\
                            \ to which this hook spec applies. If empty, it applies\
                            \ to all namespaces."
                          type: "array"
                          items:
                            type: "string"
                        excludedNamespaces:
                          nullable: true
                          description: "ExcludedNamespaces specifies the namespaces\
                            \ to which this hook spec does not apply."
                          type: "array"
                          items:
                            type: "string"
                        postHooks:
                          description: "PostHooks is a list of RestoreResourceHooks\
                            \ to execute during and after restoring a resource."
                          type: "array"
                          items:
                            description: "RestoreResourceHook defines a restore hook\
                              \ for a resource."
                            type: "object"
                            properties:
                              init:
                                description: "Init defines an init restore hook."
                                type: "object"
                                properties:
                                  initContainers:
                                    description: "InitContainers is list of init containers\
                                      \ to be added to a pod during its restore."
                                    type: "array"
                                    items:
                                      description: "A single application container\
                                        \ that you want to run within a pod."
                                      type: "object"
                                      properties:
                                        volumeDevices:
                                          description: "volumeDevices is the list\
                                            \ of block devices to be used by the container."
                                          type: "array"
                                          items:
                                            description: "volumeDevice describes a\
                                              \ mapping of a raw block device within\
                                              \ a container."
                                            type: "object"
                                            properties:
                                              devicePath:
                                                description: "devicePath is the path\
                                                  \ inside of the container that the\
                                                  \ device will be mapped to."
                                                type: "string"
                                              name:
                                                description: "name must match the\
                                                  \ name of a persistentVolumeClaim\
                                                  \ in the pod"
                                                type: "string"
                                            required:
                                            - "devicePath"
                                            - "name"
                                        image:
                                          description: "Docker image name. More info:\
                                            \ https://kubernetes.io/docs/concepts/containers/images\
                                            \ This field is optional to allow higher\
                                            \ level config management to default or\
                                            \ override container images in workload\
                                            \ controllers like Deployments and StatefulSets."
                                          type: "string"
                                        imagePullPolicy:
                                          description: "Image pull policy. One of\
                                            \ Always, Never, IfNotPresent. Defaults\
                                            \ to Always if :latest tag is specified,\
                                            \ or IfNotPresent otherwise. Cannot be\
                                            \ updated. More info: https://kubernetes.io/docs/concepts/containers/images#updating-images"
                                          type: "string"
                                        livenessProbe:
                                          description: "Periodic probe of container\
                                            \ liveness. Container will be restarted\
                                            \ if the probe fails. Cannot be updated.\
                                            \ More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                          type: "object"
                                          properties:
                                            terminationGracePeriodSeconds:
                                              format: "int64"
                                              description: "Optional duration in seconds\
                                                \ the pod needs to terminate gracefully\
                                                \ upon probe failure. The grace period\
                                                \ is the duration in seconds after\
                                                \ the processes running in the pod\
                                                \ are sent a termination signal and\
                                                \ the time when the processes are\
                                                \ forcibly halted with a kill signal.\
                                                \ Set this value longer than the expected\
                                                \ cleanup time for your process. If\
                                                \ this value is nil, the pod's terminationGracePeriodSeconds\
                                                \ will be used. Otherwise, this value\
                                                \ overrides the value provided by\
                                                \ the pod spec. Value must be non-negative\
                                                \ integer. The value zero indicates\
                                                \ stop immediately via the kill signal\
                                                \ (no opportunity to shut down). This\
                                                \ is a beta field and requires enabling\
                                                \ ProbeTerminationGracePeriod feature\
                                                \ gate. Minimum value is 1. spec.terminationGracePeriodSeconds\
                                                \ is used if unset."
                                              type: "integer"
                                            failureThreshold:
                                              format: "int32"
                                              description: "Minimum consecutive failures\
                                                \ for the probe to be considered failed\
                                                \ after having succeeded. Defaults\
                                                \ to 3. Minimum value is 1."
                                              type: "integer"
                                            periodSeconds:
                                              format: "int32"
                                              description: "How often (in seconds)\
                                                \ to perform the probe. Default to\
                                                \ 10 seconds. Minimum value is 1."
                                              type: "integer"
                                            tcpSocket:
                                              description: "TCPSocket specifies an\
                                                \ action involving a TCP port. TCP\
                                                \ hooks not yet supported TODO: implement\
                                                \ a realistic TCP lifecycle hook"
                                              type: "object"
                                              properties:
                                                port:
                                                  x-kubernetes-int-or-string: true
                                                  anyOf:
                                                  - type: "integer"
                                                  - type: "string"
                                                  description: "Number or name of\
                                                    \ the port to access on the container.\
                                                    \ Number must be in the range\
                                                    \ 1 to 65535. Name must be an\
                                                    \ IANA_SVC_NAME."
                                                host:
                                                  description: "Optional: Host name\
                                                    \ to connect to, defaults to the\
                                                    \ pod IP."
                                                  type: "string"
                                              required:
                                              - "port"
                                            timeoutSeconds:
                                              format: "int32"
                                              description: "Number of seconds after\
                                                \ which the probe times out. Defaults\
                                                \ to 1 second. Minimum value is 1.\
                                                \ More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                              type: "integer"
                                            successThreshold:
                                              format: "int32"
                                              description: "Minimum consecutive successes\
                                                \ for the probe to be considered successful\
                                                \ after having failed. Defaults to\
                                                \ 1. Must be 1 for liveness and startup.\
                                                \ Minimum value is 1."
                                              type: "integer"
                                            initialDelaySeconds:
                                              format: "int32"
                                              description: "Number of seconds after\
                                                \ the container has started before\
                                                \ liveness probes are initiated. More\
                                                \ info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                              type: "integer"
                                            exec:
                                              description: "One and only one of the\
                                                \ following should be specified. Exec\
                                                \ specifies the action to take."
                                              type: "object"
                                              properties:
                                                command:
                                                  description: "Command is the command\
                                                    \ line to execute inside the container,\
                                                    \ the working directory for the\
                                                    \ command  is root ('/') in the\
                                                    \ container's filesystem. The\
                                                    \ command is simply exec'd, it\
                                                    \ is not run inside a shell, so\
                                                    \ traditional shell instructions\
                                                    \ ('|', etc) won't work. To use\
                                                    \ a shell, you need to explicitly\
                                                    \ call out to that shell. Exit\
                                                    \ status of 0 is treated as live/healthy\
                                                    \ and non-zero is unhealthy."
                                                  type: "array"
                                                  items:
                                                    type: "string"
                                            httpGet:
                                              description: "HTTPGet specifies the\
                                                \ http request to perform."
                                              type: "object"
                                              properties:
                                                path:
                                                  description: "Path to access on\
                                                    \ the HTTP server."
                                                  type: "string"
                                                scheme:
                                                  description: "Scheme to use for\
                                                    \ connecting to the host. Defaults\
                                                    \ to HTTP."
                                                  type: "string"
                                                port:
                                                  x-kubernetes-int-or-string: true
                                                  anyOf:
                                                  - type: "integer"
                                                  - type: "string"
                                                  description: "Name or number of\
                                                    \ the port to access on the container.\
                                                    \ Number must be in the range\
                                                    \ 1 to 65535. Name must be an\
                                                    \ IANA_SVC_NAME."
                                                host:
                                                  description: "Host name to connect\
                                                    \ to, defaults to the pod IP.\
                                                    \ You probably want to set \"\
                                                    Host\" in httpHeaders instead."
                                                  type: "string"
                                                httpHeaders:
                                                  description: "Custom headers to\
                                                    \ set in the request. HTTP allows\
                                                    \ repeated headers."
                                                  type: "array"
                                                  items:
                                                    description: "HTTPHeader describes\
                                                      \ a custom header to be used\
                                                      \ in HTTP probes"
                                                    type: "object"
                                                    properties:
                                                      name:
                                                        description: "The header field\
                                                          \ name"
                                                        type: "string"
                                                      value:
                                                        description: "The header field\
                                                          \ value"
                                                        type: "string"
                                                    required:
                                                    - "name"
                                                    - "value"
                                              required:
                                              - "port"
                                        stdin:
                                          description: "Whether this container should\
                                            \ allocate a buffer for stdin in the container\
                                            \ runtime. If this is not set, reads from\
                                            \ stdin in the container will always result\
                                            \ in EOF. Default is false."
                                          type: "boolean"
                                        terminationMessagePolicy:
                                          description: "Indicate how the termination\
                                            \ message should be populated. File will\
                                            \ use the contents of terminationMessagePath\
                                            \ to populate the container status message\
                                            \ on both success and failure. FallbackToLogsOnError\
                                            \ will use the last chunk of container\
                                            \ log output if the termination message\
                                            \ file is empty and the container exited\
                                            \ with an error. The log output is limited\
                                            \ to 2048 bytes or 80 lines, whichever\
                                            \ is smaller. Defaults to File. Cannot\
                                            \ be updated."
                                          type: "string"
                                        terminationMessagePath:
                                          description: "Optional: Path at which the\
                                            \ file to which the container's termination\
                                            \ message will be written is mounted into\
                                            \ the container's filesystem. Message\
                                            \ written is intended to be brief final\
                                            \ status, such as an assertion failure\
                                            \ message. Will be truncated by the node\
                                            \ if greater than 4096 bytes. The total\
                                            \ message length across all containers\
                                            \ will be limited to 12kb. Defaults to\
                                            \ /dev/termination-log. Cannot be updated."
                                          type: "string"
                                        workingDir:
                                          description: "Container's working directory.\
                                            \ If not specified, the container runtime's\
                                            \ default will be used, which might be\
                                            \ configured in the container image. Cannot\
                                            \ be updated."
                                          type: "string"
                                        resources:
                                          description: "Compute Resources required\
                                            \ by this container. Cannot be updated.\
                                            \ More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"
                                          type: "object"
                                          properties:
                                            requests:
                                              description: "Requests describes the\
                                                \ minimum amount of compute resources\
                                                \ required. If Requests is omitted\
                                                \ for a container, it defaults to\
                                                \ Limits if that is explicitly specified,\
                                                \ otherwise to an implementation-defined\
                                                \ value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"
                                              additionalProperties:
                                                x-kubernetes-int-or-string: true
                                                pattern: "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\\
                                                  .[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\\
                                                  +|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$"
                                                anyOf:
                                                - type: "integer"
                                                - type: "string"
                                              type: "object"
                                            limits:
                                              description: "Limits describes the maximum\
                                                \ amount of compute resources allowed.\
                                                \ More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"
                                              additionalProperties:
                                                x-kubernetes-int-or-string: true
                                                pattern: "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\\
                                                  .[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\\
                                                  +|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$"
                                                anyOf:
                                                - type: "integer"
                                                - type: "string"
                                              type: "object"
                                        securityContext:
                                          description: "SecurityContext defines the\
                                            \ security options the container should\
                                            \ be run with. If set, the fields of SecurityContext\
                                            \ override the equivalent fields of PodSecurityContext.\
                                            \ More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/"
                                          type: "object"
                                          properties:
                                            privileged:
                                              description: "Run container in privileged\
                                                \ mode. Processes in privileged containers\
                                                \ are essentially equivalent to root\
                                                \ on the host. Defaults to false."
                                              type: "boolean"
                                            runAsUser:
                                              format: "int64"
                                              description: "The UID to run the entrypoint\
                                                \ of the container process. Defaults\
                                                \ to user specified in image metadata\
                                                \ if unspecified. May also be set\
                                                \ in PodSecurityContext.  If set in\
                                                \ both SecurityContext and PodSecurityContext,\
                                                \ the value specified in SecurityContext\
                                                \ takes precedence."
                                              type: "integer"
                                            capabilities:
                                              description: "The capabilities to add/drop\
                                                \ when running containers. Defaults\
                                                \ to the default set of capabilities\
                                                \ granted by the container runtime."
                                              type: "object"
                                              properties:
                                                add:
                                                  description: "Added capabilities"
                                                  type: "array"
                                                  items:
                                                    description: "Capability represent\
                                                      \ POSIX capabilities type"
                                                    type: "string"
                                                drop:
                                                  description: "Removed capabilities"
                                                  type: "array"
                                                  items:
                                                    description: "Capability represent\
                                                      \ POSIX capabilities type"
                                                    type: "string"
                                            seLinuxOptions:
                                              description: "The SELinux context to\
                                                \ be applied to the container. If\
                                                \ unspecified, the container runtime\
                                                \ will allocate a random SELinux context\
                                                \ for each container.  May also be\
                                                \ set in PodSecurityContext.  If set\
                                                \ in both SecurityContext and PodSecurityContext,\
                                                \ the value specified in SecurityContext\
                                                \ takes precedence."
                                              type: "object"
                                              properties:
                                                role:
                                                  description: "Role is a SELinux\
                                                    \ role label that applies to the\
                                                    \ container."
                                                  type: "string"
                                                level:
                                                  description: "Level is SELinux level\
                                                    \ label that applies to the container."
                                                  type: "string"
                                                type:
                                                  description: "Type is a SELinux\
                                                    \ type label that applies to the\
                                                    \ container."
                                                  type: "string"
                                                user:
                                                  description: "User is a SELinux\
                                                    \ user label that applies to the\
                                                    \ container."
                                                  type: "string"
                                            seccompProfile:
                                              description: "The seccomp options to\
                                                \ use by this container. If seccomp\
                                                \ options are provided at both the\
                                                \ pod & container level, the container\
                                                \ options override the pod options."
                                              type: "object"
                                              properties:
                                                localhostProfile:
                                                  description: "localhostProfile indicates\
                                                    \ a profile defined in a file\
                                                    \ on the node should be used.\
                                                    \ The profile must be preconfigured\
                                                    \ on the node to work. Must be\
                                                    \ a descending path, relative\
                                                    \ to the kubelet's configured\
                                                    \ seccomp profile location. Must\
                                                    \ only be set if type is \"Localhost\"\
                                                    ."
                                                  type: "string"
                                                type:
                                                  description: "type indicates which\
                                                    \ kind of seccomp profile will\
                                                    \ be applied. Valid options are:\
                                                    \ \n Localhost - a profile defined\
                                                    \ in a file on the node should\
                                                    \ be used. RuntimeDefault - the\
                                                    \ container runtime default profile\
                                                    \ should be used. Unconfined -\
                                                    \ no profile should be applied."
                                                  type: "string"
                                              required:
                                              - "type"
                                            windowsOptions:
                                              description: "The Windows specific settings\
                                                \ applied to all containers. If unspecified,\
                                                \ the options from the PodSecurityContext\
                                                \ will be used. If set in both SecurityContext\
                                                \ and PodSecurityContext, the value\
                                                \ specified in SecurityContext takes\
                                                \ precedence."
                                              type: "object"
                                              properties:
                                                gmsaCredentialSpec:
                                                  description: "GMSACredentialSpec\
                                                    \ is where the GMSA admission\
                                                    \ webhook (https://github.com/kubernetes-sigs/windows-gmsa)\
                                                    \ inlines the contents of the\
                                                    \ GMSA credential spec named by\
                                                    \ the GMSACredentialSpecName field."
                                                  type: "string"
                                                runAsUserName:
                                                  description: "The UserName in Windows\
                                                    \ to run the entrypoint of the\
                                                    \ container process. Defaults\
                                                    \ to the user specified in image\
                                                    \ metadata if unspecified. May\
                                                    \ also be set in PodSecurityContext.\
                                                    \ If set in both SecurityContext\
                                                    \ and PodSecurityContext, the\
                                                    \ value specified in SecurityContext\
                                                    \ takes precedence."
                                                  type: "string"
                                                hostProcess:
                                                  description: "HostProcess determines\
                                                    \ if a container should be run\
                                                    \ as a 'Host Process' container.\
                                                    \ This field is alpha-level and\
                                                    \ will only be honored by components\
                                                    \ that enable the WindowsHostProcessContainers\
                                                    \ feature flag. Setting this field\
                                                    \ without the feature flag will\
                                                    \ result in errors when validating\
                                                    \ the Pod. All of a Pod's containers\
                                                    \ must have the same effective\
                                                    \ HostProcess value (it is not\
                                                    \ allowed to have a mix of HostProcess\
                                                    \ containers and non-HostProcess\
                                                    \ containers).  In addition, if\
                                                    \ HostProcess is true then HostNetwork\
                                                    \ must also be set to true."
                                                  type: "boolean"
                                                gmsaCredentialSpecName:
                                                  description: "GMSACredentialSpecName\
                                                    \ is the name of the GMSA credential\
                                                    \ spec to use."
                                                  type: "string"
                                            procMount:
                                              description: "procMount denotes the\
                                                \ type of proc mount to use for the\
                                                \ containers. The default is DefaultProcMount\
                                                \ which uses the container runtime\
                                                \ defaults for readonly paths and\
                                                \ masked paths. This requires the\
                                                \ ProcMountType feature flag to be\
                                                \ enabled."
                                              type: "string"
                                            allowPrivilegeEscalation:
                                              description: "AllowPrivilegeEscalation\
                                                \ controls whether a process can gain\
                                                \ more privileges than its parent\
                                                \ process. This bool directly controls\
                                                \ if the no_new_privs flag will be\
                                                \ set on the container process. AllowPrivilegeEscalation\
                                                \ is true always when the container\
                                                \ is: 1) run as Privileged 2) has\
                                                \ CAP_SYS_ADMIN"
                                              type: "boolean"
                                            runAsGroup:
                                              format: "int64"
                                              description: "The GID to run the entrypoint\
                                                \ of the container process. Uses runtime\
                                                \ default if unset. May also be set\
                                                \ in PodSecurityContext.  If set in\
                                                \ both SecurityContext and PodSecurityContext,\
                                                \ the value specified in SecurityContext\
                                                \ takes precedence."
                                              type: "integer"
                                            runAsNonRoot:
                                              description: "Indicates that the container\
                                                \ must run as a non-root user. If\
                                                \ true, the Kubelet will validate\
                                                \ the image at runtime to ensure that\
                                                \ it does not run as UID 0 (root)\
                                                \ and fail to start the container\
                                                \ if it does. If unset or false, no\
                                                \ such validation will be performed.\
                                                \ May also be set in PodSecurityContext.\
                                                \  If set in both SecurityContext\
                                                \ and PodSecurityContext, the value\
                                                \ specified in SecurityContext takes\
                                                \ precedence."
                                              type: "boolean"
                                            readOnlyRootFilesystem:
                                              description: "Whether this container\
                                                \ has a read-only root filesystem.\
                                                \ Default is false."
                                              type: "boolean"
                                        startupProbe:
                                          description: "StartupProbe indicates that\
                                            \ the Pod has successfully initialized.\
                                            \ If specified, no other probes are executed\
                                            \ until this completes successfully. If\
                                            \ this probe fails, the Pod will be restarted,\
                                            \ just as if the livenessProbe failed.\
                                            \ This can be used to provide different\
                                            \ probe parameters at the beginning of\
                                            \ a Pod's lifecycle, when it might take\
                                            \ a long time to load data or warm a cache,\
                                            \ than during steady-state operation.\
                                            \ This cannot be updated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                          type: "object"
                                          properties:
                                            terminationGracePeriodSeconds:
                                              format: "int64"
                                              description: "Optional duration in seconds\
                                                \ the pod needs to terminate gracefully\
                                                \ upon probe failure. The grace period\
                                                \ is the duration in seconds after\
                                                \ the processes running in the pod\
                                                \ are sent a termination signal and\
                                                \ the time when the processes are\
                                                \ forcibly halted with a kill signal.\
                                                \ Set this value longer than the expected\
                                                \ cleanup time for your process. If\
                                                \ this value is nil, the pod's terminationGracePeriodSeconds\
                                                \ will be used. Otherwise, this value\
                                                \ overrides the value provided by\
                                                \ the pod spec. Value must be non-negative\
                                                \ integer. The value zero indicates\
                                                \ stop immediately via the kill signal\
                                                \ (no opportunity to shut down). This\
                                                \ is a beta field and requires enabling\
                                                \ ProbeTerminationGracePeriod feature\
                                                \ gate. Minimum value is 1. spec.terminationGracePeriodSeconds\
                                                \ is used if unset."
                                              type: "integer"
                                            failureThreshold:
                                              format: "int32"
                                              description: "Minimum consecutive failures\
                                                \ for the probe to be considered failed\
                                                \ after having succeeded. Defaults\
                                                \ to 3. Minimum value is 1."
                                              type: "integer"
                                            periodSeconds:
                                              format: "int32"
                                              description: "How often (in seconds)\
                                                \ to perform the probe. Default to\
                                                \ 10 seconds. Minimum value is 1."
                                              type: "integer"
                                            tcpSocket:
                                              description: "TCPSocket specifies an\
                                                \ action involving a TCP port. TCP\
                                                \ hooks not yet supported TODO: implement\
                                                \ a realistic TCP lifecycle hook"
                                              type: "object"
                                              properties:
                                                port:
                                                  x-kubernetes-int-or-string: true
                                                  anyOf:
                                                  - type: "integer"
                                                  - type: "string"
                                                  description: "Number or name of\
                                                    \ the port to access on the container.\
                                                    \ Number must be in the range\
                                                    \ 1 to 65535. Name must be an\
                                                    \ IANA_SVC_NAME."
                                                host:
                                                  description: "Optional: Host name\
                                                    \ to connect to, defaults to the\
                                                    \ pod IP."
                                                  type: "string"
                                              required:
                                              - "port"
                                            timeoutSeconds:
                                              format: "int32"
                                              description: "Number of seconds after\
                                                \ which the probe times out. Defaults\
                                                \ to 1 second. Minimum value is 1.\
                                                \ More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                              type: "integer"
                                            successThreshold:
                                              format: "int32"
                                              description: "Minimum consecutive successes\
                                                \ for the probe to be considered successful\
                                                \ after having failed. Defaults to\
                                                \ 1. Must be 1 for liveness and startup.\
                                                \ Minimum value is 1."
                                              type: "integer"
                                            initialDelaySeconds:
                                              format: "int32"
                                              description: "Number of seconds after\
                                                \ the container has started before\
                                                \ liveness probes are initiated. More\
                                                \ info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                              type: "integer"
                                            exec:
                                              description: "One and only one of the\
                                                \ following should be specified. Exec\
                                                \ specifies the action to take."
                                              type: "object"
                                              properties:
                                                command:
                                                  description: "Command is the command\
                                                    \ line to execute inside the container,\
                                                    \ the working directory for the\
                                                    \ command  is root ('/') in the\
                                                    \ container's filesystem. The\
                                                    \ command is simply exec'd, it\
                                                    \ is not run inside a shell, so\
                                                    \ traditional shell instructions\
                                                    \ ('|', etc) won't work. To use\
                                                    \ a shell, you need to explicitly\
                                                    \ call out to that shell. Exit\
                                                    \ status of 0 is treated as live/healthy\
                                                    \ and non-zero is unhealthy."
                                                  type: "array"
                                                  items:
                                                    type: "string"
                                            httpGet:
                                              description: "HTTPGet specifies the\
                                                \ http request to perform."
                                              type: "object"
                                              properties:
                                                path:
                                                  description: "Path to access on\
                                                    \ the HTTP server."
                                                  type: "string"
                                                scheme:
                                                  description: "Scheme to use for\
                                                    \ connecting to the host. Defaults\
                                                    \ to HTTP."
                                                  type: "string"
                                                port:
                                                  x-kubernetes-int-or-string: true
                                                  anyOf:
                                                  - type: "integer"
                                                  - type: "string"
                                                  description: "Name or number of\
                                                    \ the port to access on the container.\
                                                    \ Number must be in the range\
                                                    \ 1 to 65535. Name must be an\
                                                    \ IANA_SVC_NAME."
                                                host:
                                                  description: "Host name to connect\
                                                    \ to, defaults to the pod IP.\
                                                    \ You probably want to set \"\
                                                    Host\" in httpHeaders instead."
                                                  type: "string"
                                                httpHeaders:
                                                  description: "Custom headers to\
                                                    \ set in the request. HTTP allows\
                                                    \ repeated headers."
                                                  type: "array"
                                                  items:
                                                    description: "HTTPHeader describes\
                                                      \ a custom header to be used\
                                                      \ in HTTP probes"
                                                    type: "object"
                                                    properties:
                                                      name:
                                                        description: "The header field\
                                                          \ name"
                                                        type: "string"
                                                      value:
                                                        description: "The header field\
                                                          \ value"
                                                        type: "string"
                                                    required:
                                                    - "name"
                                                    - "value"
                                              required:
                                              - "port"
                                        env:
                                          description: "List of environment variables\
                                            \ to set in the container. Cannot be updated."
                                          type: "array"
                                          items:
                                            description: "EnvVar represents an environment\
                                              \ variable present in a Container."
                                            type: "object"
                                            properties:
                                              name:
                                                description: "Name of the environment\
                                                  \ variable. Must be a C_IDENTIFIER."
                                                type: "string"
                                              value:
                                                description: "Variable references\
                                                  \ $(VAR_NAME) are expanded using\
                                                  \ the previously defined environment\
                                                  \ variables in the container and\
                                                  \ any service environment variables.\
                                                  \ If a variable cannot be resolved,\
                                                  \ the reference in the input string\
                                                  \ will be unchanged. Double $$ are\
                                                  \ reduced to a single $, which allows\
                                                  \ for escaping the $(VAR_NAME) syntax:\
                                                  \ i.e. \"$$(VAR_NAME)\" will produce\
                                                  \ the string literal \"$(VAR_NAME)\"\
                                                  . Escaped references will never\
                                                  \ be expanded, regardless of whether\
                                                  \ the variable exists or not. Defaults\
                                                  \ to \"\"."
                                                type: "string"
                                              valueFrom:
                                                description: "Source for the environment\
                                                  \ variable's value. Cannot be used\
                                                  \ if value is not empty."
                                                type: "object"
                                                properties:
                                                  secretKeyRef:
                                                    description: "Selects a key of\
                                                      \ a secret in the pod's namespace"
                                                    type: "object"
                                                    properties:
                                                      name:
                                                        description: "Name of the\
                                                          \ referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names\
                                                          \ TODO: Add other useful\
                                                          \ fields. apiVersion, kind,\
                                                          \ uid?"
                                                        type: "string"
                                                      optional:
                                                        description: "Specify whether\
                                                          \ the Secret or its key\
                                                          \ must be defined"
                                                        type: "boolean"
                                                      key:
                                                        description: "The key of the\
                                                          \ secret to select from.\
                                                          \  Must be a valid secret\
                                                          \ key."
                                                        type: "string"
                                                    required:
                                                    - "key"
                                                  resourceFieldRef:
                                                    description: "Selects a resource\
                                                      \ of the container: only resources\
                                                      \ limits and requests (limits.cpu,\
                                                      \ limits.memory, limits.ephemeral-storage,\
                                                      \ requests.cpu, requests.memory\
                                                      \ and requests.ephemeral-storage)\
                                                      \ are currently supported."
                                                    type: "object"
                                                    properties:
                                                      divisor:
                                                        x-kubernetes-int-or-string: true
                                                        pattern: "^(\\+|-)?(([0-9]+(\\\
                                                          .[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\\
                                                          +|-)?(([0-9]+(\\.[0-9]*)?)|(\\\
                                                          .[0-9]+))))?$"
                                                        anyOf:
                                                        - type: "integer"
                                                        - type: "string"
                                                        description: "Specifies the\
                                                          \ output format of the exposed\
                                                          \ resources, defaults to\
                                                          \ \"1\""
                                                      resource:
                                                        description: "Required: resource\
                                                          \ to select"
                                                        type: "string"
                                                      containerName:
                                                        description: "Container name:\
                                                          \ required for volumes,\
                                                          \ optional for env vars"
                                                        type: "string"
                                                    required:
                                                    - "resource"
                                                  configMapKeyRef:
                                                    description: "Selects a key of\
                                                      \ a ConfigMap."
                                                    type: "object"
                                                    properties:
                                                      name:
                                                        description: "Name of the\
                                                          \ referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names\
                                                          \ TODO: Add other useful\
                                                          \ fields. apiVersion, kind,\
                                                          \ uid?"
                                                        type: "string"
                                                      optional:
                                                        description: "Specify whether\
                                                          \ the ConfigMap or its key\
                                                          \ must be defined"
                                                        type: "boolean"
                                                      key:
                                                        description: "The key to select."
                                                        type: "string"
                                                    required:
                                                    - "key"
                                                  fieldRef:
                                                    description: "Selects a field\
                                                      \ of the pod: supports metadata.name,\
                                                      \ metadata.namespace, `metadata.labels['<KEY>']`,\
                                                      \ `metadata.annotations['<KEY>']`,\
                                                      \ spec.nodeName, spec.serviceAccountName,\
                                                      \ status.hostIP, status.podIP,\
                                                      \ status.podIPs."
                                                    type: "object"
                                                    properties:
                                                      apiVersion:
                                                        description: "Version of the\
                                                          \ schema the FieldPath is\
                                                          \ written in terms of, defaults\
                                                          \ to \"v1\"."
                                                        type: "string"
                                                      fieldPath:
                                                        description: "Path of the\
                                                          \ field to select in the\
                                                          \ specified API version."
                                                        type: "string"
                                                    required:
                                                    - "fieldPath"
                                            required:
                                            - "name"
                                        ports:
                                          x-kubernetes-list-type: "map"
                                          x-kubernetes-list-map-keys:
                                          - "containerPort"
                                          - "protocol"
                                          description: "List of ports to expose from\
                                            \ the container. Exposing a port here\
                                            \ gives the system additional information\
                                            \ about the network connections a container\
                                            \ uses, but is primarily informational.\
                                            \ Not specifying a port here DOES NOT\
                                            \ prevent that port from being exposed.\
                                            \ Any port which is listening on the default\
                                            \ \"0.0.0.0\" address inside a container\
                                            \ will be accessible from the network.\
                                            \ Cannot be updated."
                                          type: "array"
                                          items:
                                            description: "ContainerPort represents\
                                              \ a network port in a single container."
                                            type: "object"
                                            properties:
                                              protocol:
                                                default: "TCP"
                                                description: "Protocol for port. Must\
                                                  \ be UDP, TCP, or SCTP. Defaults\
                                                  \ to \"TCP\"."
                                                type: "string"
                                              hostIP:
                                                description: "What host IP to bind\
                                                  \ the external port to."
                                                type: "string"
                                              name:
                                                description: "If specified, this must\
                                                  \ be an IANA_SVC_NAME and unique\
                                                  \ within the pod. Each named port\
                                                  \ in a pod must have a unique name.\
                                                  \ Name for the port that can be\
                                                  \ referred to by services."
                                                type: "string"
                                              containerPort:
                                                format: "int32"
                                                description: "Number of port to expose\
                                                  \ on the pod's IP address. This\
                                                  \ must be a valid port number, 0\
                                                  \ < x < 65536."
                                                type: "integer"
                                              hostPort:
                                                format: "int32"
                                                description: "Number of port to expose\
                                                  \ on the host. If specified, this\
                                                  \ must be a valid port number, 0\
                                                  \ < x < 65536. If HostNetwork is\
                                                  \ specified, this must match ContainerPort.\
                                                  \ Most containers do not need this."
                                                type: "integer"
                                            required:
                                            - "containerPort"
                                            - "protocol"
                                        command:
                                          description: "Entrypoint array. Not executed\
                                            \ within a shell. The docker image's ENTRYPOINT\
                                            \ is used if this is not provided. Variable\
                                            \ references $(VAR_NAME) are expanded\
                                            \ using the container's environment. If\
                                            \ a variable cannot be resolved, the reference\
                                            \ in the input string will be unchanged.\
                                            \ Double $$ are reduced to a single $,\
                                            \ which allows for escaping the $(VAR_NAME)\
                                            \ syntax: i.e. \"$$(VAR_NAME)\" will produce\
                                            \ the string literal \"$(VAR_NAME)\".\
                                            \ Escaped references will never be expanded,\
                                            \ regardless of whether the variable exists\
                                            \ or not. Cannot be updated. More info:\
                                            \ https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell"
                                          type: "array"
                                          items:
                                            type: "string"
                                        volumeMounts:
                                          description: "Pod volumes to mount into\
                                            \ the container's filesystem. Cannot be\
                                            \ updated."
                                          type: "array"
                                          items:
                                            description: "VolumeMount describes a\
                                              \ mounting of a Volume within a container."
                                            type: "object"
                                            properties:
                                              mountPath:
                                                description: "Path within the container\
                                                  \ at which the volume should be\
                                                  \ mounted.  Must not contain ':'."
                                                type: "string"
                                              mountPropagation:
                                                description: "mountPropagation determines\
                                                  \ how mounts are propagated from\
                                                  \ the host to container and the\
                                                  \ other way around. When not set,\
                                                  \ MountPropagationNone is used.\
                                                  \ This field is beta in 1.10."
                                                type: "string"
                                              name:
                                                description: "This must match the\
                                                  \ Name of a Volume."
                                                type: "string"
                                              readOnly:
                                                description: "Mounted read-only if\
                                                  \ true, read-write otherwise (false\
                                                  \ or unspecified). Defaults to false."
                                                type: "boolean"
                                              subPath:
                                                description: "Path within the volume\
                                                  \ from which the container's volume\
                                                  \ should be mounted. Defaults to\
                                                  \ \"\" (volume's root)."
                                                type: "string"
                                              subPathExpr:
                                                description: "Expanded path within\
                                                  \ the volume from which the container's\
                                                  \ volume should be mounted. Behaves\
                                                  \ similarly to SubPath but environment\
                                                  \ variable references $(VAR_NAME)\
                                                  \ are expanded using the container's\
                                                  \ environment. Defaults to \"\"\
                                                  \ (volume's root). SubPathExpr and\
                                                  \ SubPath are mutually exclusive."
                                                type: "string"
                                            required:
                                            - "mountPath"
                                            - "name"
                                        args:
                                          description: "Arguments to the entrypoint.\
                                            \ The docker image's CMD is used if this\
                                            \ is not provided. Variable references\
                                            \ $(VAR_NAME) are expanded using the container's\
                                            \ environment. If a variable cannot be\
                                            \ resolved, the reference in the input\
                                            \ string will be unchanged. Double $$\
                                            \ are reduced to a single $, which allows\
                                            \ for escaping the $(VAR_NAME) syntax:\
                                            \ i.e. \"$$(VAR_NAME)\" will produce the\
                                            \ string literal \"$(VAR_NAME)\". Escaped\
                                            \ references will never be expanded, regardless\
                                            \ of whether the variable exists or not.\
                                            \ Cannot be updated. More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell"
                                          type: "array"
                                          items:
                                            type: "string"
                                        lifecycle:
                                          description: "Actions that the management\
                                            \ system should take in response to container\
                                            \ lifecycle events. Cannot be updated."
                                          type: "object"
                                          properties:
                                            postStart:
                                              description: "PostStart is called immediately\
                                                \ after a container is created. If\
                                                \ the handler fails, the container\
                                                \ is terminated and restarted according\
                                                \ to its restart policy. Other management\
                                                \ of the container blocks until the\
                                                \ hook completes. More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks"
                                              type: "object"
                                              properties:
                                                tcpSocket:
                                                  description: "TCPSocket specifies\
                                                    \ an action involving a TCP port.\
                                                    \ TCP hooks not yet supported\
                                                    \ TODO: implement a realistic\
                                                    \ TCP lifecycle hook"
                                                  type: "object"
                                                  properties:
                                                    port:
                                                      x-kubernetes-int-or-string: true
                                                      anyOf:
                                                      - type: "integer"
                                                      - type: "string"
                                                      description: "Number or name\
                                                        \ of the port to access on\
                                                        \ the container. Number must\
                                                        \ be in the range 1 to 65535.\
                                                        \ Name must be an IANA_SVC_NAME."
                                                    host:
                                                      description: "Optional: Host\
                                                        \ name to connect to, defaults\
                                                        \ to the pod IP."
                                                      type: "string"
                                                  required:
                                                  - "port"
                                                exec:
                                                  description: "One and only one of\
                                                    \ the following should be specified.\
                                                    \ Exec specifies the action to\
                                                    \ take."
                                                  type: "object"
                                                  properties:
                                                    command:
                                                      description: "Command is the\
                                                        \ command line to execute\
                                                        \ inside the container, the\
                                                        \ working directory for the\
                                                        \ command  is root ('/') in\
                                                        \ the container's filesystem.\
                                                        \ The command is simply exec'd,\
                                                        \ it is not run inside a shell,\
                                                        \ so traditional shell instructions\
                                                        \ ('|', etc) won't work. To\
                                                        \ use a shell, you need to\
                                                        \ explicitly call out to that\
                                                        \ shell. Exit status of 0\
                                                        \ is treated as live/healthy\
                                                        \ and non-zero is unhealthy."
                                                      type: "array"
                                                      items:
                                                        type: "string"
                                                httpGet:
                                                  description: "HTTPGet specifies\
                                                    \ the http request to perform."
                                                  type: "object"
                                                  properties:
                                                    path:
                                                      description: "Path to access\
                                                        \ on the HTTP server."
                                                      type: "string"
                                                    scheme:
                                                      description: "Scheme to use\
                                                        \ for connecting to the host.\
                                                        \ Defaults to HTTP."
                                                      type: "string"
                                                    port:
                                                      x-kubernetes-int-or-string: true
                                                      anyOf:
                                                      - type: "integer"
                                                      - type: "string"
                                                      description: "Name or number\
                                                        \ of the port to access on\
                                                        \ the container. Number must\
                                                        \ be in the range 1 to 65535.\
                                                        \ Name must be an IANA_SVC_NAME."
                                                    host:
                                                      description: "Host name to connect\
                                                        \ to, defaults to the pod\
                                                        \ IP. You probably want to\
                                                        \ set \"Host\" in httpHeaders\
                                                        \ instead."
                                                      type: "string"
                                                    httpHeaders:
                                                      description: "Custom headers\
                                                        \ to set in the request. HTTP\
                                                        \ allows repeated headers."
                                                      type: "array"
                                                      items:
                                                        description: "HTTPHeader describes\
                                                          \ a custom header to be\
                                                          \ used in HTTP probes"
                                                        type: "object"
                                                        properties:
                                                          name:
                                                            description: "The header\
                                                              \ field name"
                                                            type: "string"
                                                          value:
                                                            description: "The header\
                                                              \ field value"
                                                            type: "string"
                                                        required:
                                                        - "name"
                                                        - "value"
                                                  required:
                                                  - "port"
                                            preStop:
                                              description: "PreStop is called immediately\
                                                \ before a container is terminated\
                                                \ due to an API request or management\
                                                \ event such as liveness/startup probe\
                                                \ failure, preemption, resource contention,\
                                                \ etc. The handler is not called if\
                                                \ the container crashes or exits.\
                                                \ The reason for termination is passed\
                                                \ to the handler. The Pod's termination\
                                                \ grace period countdown begins before\
                                                \ the PreStop hooked is executed.\
                                                \ Regardless of the outcome of the\
                                                \ handler, the container will eventually\
                                                \ terminate within the Pod's termination\
                                                \ grace period. Other management of\
                                                \ the container blocks until the hook\
                                                \ completes or until the termination\
                                                \ grace period is reached. More info:\
                                                \ https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks"
                                              type: "object"
                                              properties:
                                                tcpSocket:
                                                  description: "TCPSocket specifies\
                                                    \ an action involving a TCP port.\
                                                    \ TCP hooks not yet supported\
                                                    \ TODO: implement a realistic\
                                                    \ TCP lifecycle hook"
                                                  type: "object"
                                                  properties:
                                                    port:
                                                      x-kubernetes-int-or-string: true
                                                      anyOf:
                                                      - type: "integer"
                                                      - type: "string"
                                                      description: "Number or name\
                                                        \ of the port to access on\
                                                        \ the container. Number must\
                                                        \ be in the range 1 to 65535.\
                                                        \ Name must be an IANA_SVC_NAME."
                                                    host:
                                                      description: "Optional: Host\
                                                        \ name to connect to, defaults\
                                                        \ to the pod IP."
                                                      type: "string"
                                                  required:
                                                  - "port"
                                                exec:
                                                  description: "One and only one of\
                                                    \ the following should be specified.\
                                                    \ Exec specifies the action to\
                                                    \ take."
                                                  type: "object"
                                                  properties:
                                                    command:
                                                      description: "Command is the\
                                                        \ command line to execute\
                                                        \ inside the container, the\
                                                        \ working directory for the\
                                                        \ command  is root ('/') in\
                                                        \ the container's filesystem.\
                                                        \ The command is simply exec'd,\
                                                        \ it is not run inside a shell,\
                                                        \ so traditional shell instructions\
                                                        \ ('|', etc) won't work. To\
                                                        \ use a shell, you need to\
                                                        \ explicitly call out to that\
                                                        \ shell. Exit status of 0\
                                                        \ is treated as live/healthy\
                                                        \ and non-zero is unhealthy."
                                                      type: "array"
                                                      items:
                                                        type: "string"
                                                httpGet:
                                                  description: "HTTPGet specifies\
                                                    \ the http request to perform."
                                                  type: "object"
                                                  properties:
                                                    path:
                                                      description: "Path to access\
                                                        \ on the HTTP server."
                                                      type: "string"
                                                    scheme:
                                                      description: "Scheme to use\
                                                        \ for connecting to the host.\
                                                        \ Defaults to HTTP."
                                                      type: "string"
                                                    port:
                                                      x-kubernetes-int-or-string: true
                                                      anyOf:
                                                      - type: "integer"
                                                      - type: "string"
                                                      description: "Name or number\
                                                        \ of the port to access on\
                                                        \ the container. Number must\
                                                        \ be in the range 1 to 65535.\
                                                        \ Name must be an IANA_SVC_NAME."
                                                    host:
                                                      description: "Host name to connect\
                                                        \ to, defaults to the pod\
                                                        \ IP. You probably want to\
                                                        \ set \"Host\" in httpHeaders\
                                                        \ instead."
                                                      type: "string"
                                                    httpHeaders:
                                                      description: "Custom headers\
                                                        \ to set in the request. HTTP\
                                                        \ allows repeated headers."
                                                      type: "array"
                                                      items:
                                                        description: "HTTPHeader describes\
                                                          \ a custom header to be\
                                                          \ used in HTTP probes"
                                                        type: "object"
                                                        properties:
                                                          name:
                                                            description: "The header\
                                                              \ field name"
                                                            type: "string"
                                                          value:
                                                            description: "The header\
                                                              \ field value"
                                                            type: "string"
                                                        required:
                                                        - "name"
                                                        - "value"
                                                  required:
                                                  - "port"
                                        name:
                                          description: "Name of the container specified\
                                            \ as a DNS_LABEL. Each container in a\
                                            \ pod must have a unique name (DNS_LABEL).\
                                            \ Cannot be updated."
                                          type: "string"
                                        tty:
                                          description: "Whether this container should\
                                            \ allocate a TTY for itself, also requires\
                                            \ 'stdin' to be true. Default is false."
                                          type: "boolean"
                                        readinessProbe:
                                          description: "Periodic probe of container\
                                            \ service readiness. Container will be\
                                            \ removed from service endpoints if the\
                                            \ probe fails. Cannot be updated. More\
                                            \ info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                          type: "object"
                                          properties:
                                            terminationGracePeriodSeconds:
                                              format: "int64"
                                              description: "Optional duration in seconds\
                                                \ the pod needs to terminate gracefully\
                                                \ upon probe failure. The grace period\
                                                \ is the duration in seconds after\
                                                \ the processes running in the pod\
                                                \ are sent a termination signal and\
                                                \ the time when the processes are\
                                                \ forcibly halted with a kill signal.\
                                                \ Set this value longer than the expected\
                                                \ cleanup time for your process. If\
                                                \ this value is nil, the pod's terminationGracePeriodSeconds\
                                                \ will be used. Otherwise, this value\
                                                \ overrides the value provided by\
                                                \ the pod spec. Value must be non-negative\
                                                \ integer. The value zero indicates\
                                                \ stop immediately via the kill signal\
                                                \ (no opportunity to shut down). This\
                                                \ is a beta field and requires enabling\
                                                \ ProbeTerminationGracePeriod feature\
                                                \ gate. Minimum value is 1. spec.terminationGracePeriodSeconds\
                                                \ is used if unset."
                                              type: "integer"
                                            failureThreshold:
                                              format: "int32"
                                              description: "Minimum consecutive failures\
                                                \ for the probe to be considered failed\
                                                \ after having succeeded. Defaults\
                                                \ to 3. Minimum value is 1."
                                              type: "integer"
                                            periodSeconds:
                                              format: "int32"
                                              description: "How often (in seconds)\
                                                \ to perform the probe. Default to\
                                                \ 10 seconds. Minimum value is 1."
                                              type: "integer"
                                            tcpSocket:
                                              description: "TCPSocket specifies an\
                                                \ action involving a TCP port. TCP\
                                                \ hooks not yet supported TODO: implement\
                                                \ a realistic TCP lifecycle hook"
                                              type: "object"
                                              properties:
                                                port:
                                                  x-kubernetes-int-or-string: true
                                                  anyOf:
                                                  - type: "integer"
                                                  - type: "string"
                                                  description: "Number or name of\
                                                    \ the port to access on the container.\
                                                    \ Number must be in the range\
                                                    \ 1 to 65535. Name must be an\
                                                    \ IANA_SVC_NAME."
                                                host:
                                                  description: "Optional: Host name\
                                                    \ to connect to, defaults to the\
                                                    \ pod IP."
                                                  type: "string"
                                              required:
                                              - "port"
                                            timeoutSeconds:
                                              format: "int32"
                                              description: "Number of seconds after\
                                                \ which the probe times out. Defaults\
                                                \ to 1 second. Minimum value is 1.\
                                                \ More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                              type: "integer"
                                            successThreshold:
                                              format: "int32"
                                              description: "Minimum consecutive successes\
                                                \ for the probe to be considered successful\
                                                \ after having failed. Defaults to\
                                                \ 1. Must be 1 for liveness and startup.\
                                                \ Minimum value is 1."
                                              type: "integer"
                                            initialDelaySeconds:
                                              format: "int32"
                                              description: "Number of seconds after\
                                                \ the container has started before\
                                                \ liveness probes are initiated. More\
                                                \ info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes"
                                              type: "integer"
                                            exec:
                                              description: "One and only one of the\
                                                \ following should be specified. Exec\
                                                \ specifies the action to take."
                                              type: "object"
                                              properties:
                                                command:
                                                  description: "Command is the command\
                                                    \ line to execute inside the container,\
                                                    \ the working directory for the\
                                                    \ command  is root ('/') in the\
                                                    \ container's filesystem. The\
                                                    \ command is simply exec'd, it\
                                                    \ is not run inside a shell, so\
                                                    \ traditional shell instructions\
                                                    \ ('|', etc) won't work. To use\
                                                    \ a shell, you need to explicitly\
                                                    \ call out to that shell. Exit\
                                                    \ status of 0 is treated as live/healthy\
                                                    \ and non-zero is unhealthy."
                                                  type: "array"
                                                  items:
                                                    type: "string"
                                            httpGet:
                                              description: "HTTPGet specifies the\
                                                \ http request to perform."
                                              type: "object"
                                              properties:
                                                path:
                                                  description: "Path to access on\
                                                    \ the HTTP server."
                                                  type: "string"
                                                scheme:
                                                  description: "Scheme to use for\
                                                    \ connecting to the host. Defaults\
                                                    \ to HTTP."
                                                  type: "string"
                                                port:
                                                  x-kubernetes-int-or-string: true
                                                  anyOf:
                                                  - type: "integer"
                                                  - type: "string"
                                                  description: "Name or number of\
                                                    \ the port to access on the container.\
                                                    \ Number must be in the range\
                                                    \ 1 to 65535. Name must be an\
                                                    \ IANA_SVC_NAME."
                                                host:
                                                  description: "Host name to connect\
                                                    \ to, defaults to the pod IP.\
                                                    \ You probably want to set \"\
                                                    Host\" in httpHeaders instead."
                                                  type: "string"
                                                httpHeaders:
                                                  description: "Custom headers to\
                                                    \ set in the request. HTTP allows\
                                                    \ repeated headers."
                                                  type: "array"
                                                  items:
                                                    description: "HTTPHeader describes\
                                                      \ a custom header to be used\
                                                      \ in HTTP probes"
                                                    type: "object"
                                                    properties:
                                                      name:
                                                        description: "The header field\
                                                          \ name"
                                                        type: "string"
                                                      value:
                                                        description: "The header field\
                                                          \ value"
                                                        type: "string"
                                                    required:
                                                    - "name"
                                                    - "value"
                                              required:
                                              - "port"
                                        stdinOnce:
                                          description: "Whether the container runtime\
                                            \ should close the stdin channel after\
                                            \ it has been opened by a single attach.\
                                            \ When stdin is true the stdin stream\
                                            \ will remain open across multiple attach\
                                            \ sessions. If stdinOnce is set to true,\
                                            \ stdin is opened on container start,\
                                            \ is empty until the first client attaches\
                                            \ to stdin, and then remains open and\
                                            \ accepts data until the client disconnects,\
                                            \ at which time stdin is closed and remains\
                                            \ closed until the container is restarted.\
                                            \ If this flag is false, a container processes\
                                            \ that reads from stdin will never receive\
                                            \ an EOF. Default is false"
                                          type: "boolean"
                                        envFrom:
                                          description: "List of sources to populate\
                                            \ environment variables in the container.\
                                            \ The keys defined within a source must\
                                            \ be a C_IDENTIFIER. All invalid keys\
                                            \ will be reported as an event when the\
                                            \ container is starting. When a key exists\
                                            \ in multiple sources, the value associated\
                                            \ with the last source will take precedence.\
                                            \ Values defined by an Env with a duplicate\
                                            \ key will take precedence. Cannot be\
                                            \ updated."
                                          type: "array"
                                          items:
                                            description: "EnvFromSource represents\
                                              \ the source of a set of ConfigMaps"
                                            type: "object"
                                            properties:
                                              configMapRef:
                                                description: "The ConfigMap to select\
                                                  \ from"
                                                type: "object"
                                                properties:
                                                  name:
                                                    description: "Name of the referent.\
                                                      \ More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names\
                                                      \ TODO: Add other useful fields.\
                                                      \ apiVersion, kind, uid?"
                                                    type: "string"
                                                  optional:
                                                    description: "Specify whether\
                                                      \ the ConfigMap must be defined"
                                                    type: "boolean"
                                              prefix:
                                                description: "An optional identifier\
                                                  \ to prepend to each key in the\
                                                  \ ConfigMap. Must be a C_IDENTIFIER."
                                                type: "string"
                                              secretRef:
                                                description: "The Secret to select\
                                                  \ from"
                                                type: "object"
                                                properties:
                                                  name:
                                                    description: "Name of the referent.\
                                                      \ More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names\
                                                      \ TODO: Add other useful fields.\
                                                      \ apiVersion, kind, uid?"
                                                    type: "string"
                                                  optional:
                                                    description: "Specify whether\
                                                      \ the Secret must be defined"
                                                    type: "boolean"
                                      required:
                                      - "name"
                                  timeout:
                                    description: "Timeout defines the maximum amount\
                                      \ of time Velero should wait for the initContainers\
                                      \ to complete."
                                    type: "string"
                              exec:
                                description: "Exec defines an exec restore hook."
                                type: "object"
                                properties:
                                  container:
                                    description: "Container is the container in the\
                                      \ pod where the command should be executed.\
                                      \ If not specified, the pod's first container\
                                      \ is used."
                                    type: "string"
                                  execTimeout:
                                    description: "ExecTimeout defines the maximum\
                                      \ amount of time Velero should wait for the\
                                      \ hook to complete before considering the execution\
                                      \ a failure."
                                    type: "string"
                                  onError:
                                    description: "OnError specifies how Velero should\
                                      \ behave if it encounters an error executing\
                                      \ this hook."
                                    type: "string"
                                    enum:
                                    - "Continue"
                                    - "Fail"
                                  waitTimeout:
                                    description: "WaitTimeout defines the maximum\
                                      \ amount of time Velero should wait for the\
                                      \ container to be Ready before attempting to\
                                      \ run the command."
                                    type: "string"
                                  command:
                                    minItems: 1
                                    description: "Command is the command and arguments\
                                      \ to execute from within a container after a\
                                      \ pod has been restored."
                                    type: "array"
                                    items:
                                      type: "string"
                                required:
                                - "command"
                        includedResources:
                          nullable: true
                          description: "IncludedResources specifies the resources\
                            \ to which this hook spec applies. If empty, it applies\
                            \ to all resources."
                          type: "array"
                          items:
                            type: "string"
                      required:
                      - "name"
              includedResources:
                nullable: true
                description: "IncludedResources is a slice of resource names to include\
                  \ in the restore. If empty, all resources in the backup are included."
                type: "array"
                items:
                  type: "string"
              existingResourcePolicy:
                nullable: true
                description: "ExistingResourcePolicy specifies the restore behaviour\
                  \ for the kubernetes resource to be restored"
                type: "string"
            required:
            - "backupName"
          status:
            description: "RestoreStatus captures the current status of a Velero restore"
            type: "object"
            properties:
              phase:
                description: "Phase is the current state of the Restore"
                type: "string"
                enum:
                - "New"
                - "FailedValidation"
                - "InProgress"
                - "Completed"
                - "PartiallyFailed"
                - "Failed"
              completionTimestamp:
                nullable: true
                format: "date-time"
                description: "CompletionTimestamp records the time the restore operation\
                  \ was completed. Completion time is recorded even on failed restore.\
                  \ The server's time is used for StartTimestamps"
                type: "string"
              failureReason:
                description: "FailureReason is an error that caused the entire restore\
                  \ to fail."
                type: "string"
              warnings:
                description: "Warnings is a count of all warning messages that were\
                  \ generated during execution of the restore. The actual warnings\
                  \ are stored in object storage."
                type: "integer"
              progress:
                nullable: true
                description: "Progress contains information about the restore's execution\
                  \ progress. Note that this information is best-effort only -- if\
                  \ Velero fails to update it during a restore for any reason, it\
                  \ may be inaccurate/stale."
                type: "object"
                properties:
                  itemsRestored:
                    description: "ItemsRestored is the number of items that have actually\
                      \ been restored so far"
                    type: "integer"
                  totalItems:
                    description: "TotalItems is the total number of items to be restored.\
                      \ This number may change throughout the execution of the restore\
                      \ due to plugins that return additional related items to restore"
                    type: "integer"
              validationErrors:
                nullable: true
                description: "ValidationErrors is a slice of all validation errors\
                  \ (if applicable)"
                type: "array"
                items:
                  type: "string"
              errors:
                description: "Errors is a count of all error messages that were generated\
                  \ during execution of the restore. The actual errors are stored\
                  \ in object storage."
                type: "integer"
              startTimestamp:
                nullable: true
                format: "date-time"
                description: "StartTimestamp records the time the restore operation\
                  \ was started. The server's time is used for StartTimestamps"
                type: "string"

---
apiVersion: "rbac.authorization.k8s.io/v1"
kind: "ClusterRoleBinding"
metadata:
  annotations: {}
  name: "velero-server"
  labels:
    helm.sh/chart: "velero-2.30.1"
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/name: "velero"
    app.kubernetes.io/instance: "velero"
    app.kubernetes.io/component: "server"
subjects:
- kind: "ServiceAccount"
  name: "velero-server"
  namespace: "velero"
roleRef:
  apiGroup: "rbac.authorization.k8s.io"
  kind: "ClusterRole"
  name: "cluster-admin"

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "serverstatusrequests.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "ServerStatusRequest"
    listKind: "ServerStatusRequestList"
    plural: "serverstatusrequests"
    shortNames:
    - "ssr"
    singular: "serverstatusrequest"
  versions:
  - name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: "ServerStatusRequest is a request to access current status information\
          \ about the Velero server."
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "ServerStatusRequestSpec is the specification for a ServerStatusRequest."
            type: "object"
          status:
            description: "ServerStatusRequestStatus is the current status of a ServerStatusRequest."
            type: "object"
            properties:
              phase:
                description: "Phase is the current lifecycle phase of the ServerStatusRequest."
                type: "string"
                enum:
                - "New"
                - "Processed"
              serverVersion:
                description: "ServerVersion is the Velero server version."
                type: "string"
              plugins:
                nullable: true
                description: "Plugins list information about the plugins running on\
                  \ the Velero server"
                type: "array"
                items:
                  description: "PluginInfo contains attributes of a Velero plugin"
                  type: "object"
                  properties:
                    kind:
                      type: "string"
                    name:
                      type: "string"
                  required:
                  - "kind"
                  - "name"
              processedTimestamp:
                nullable: true
                format: "date-time"
                description: "ProcessedTimestamp is when the ServerStatusRequest was\
                  \ processed by the ServerStatusRequestController."
                type: "string"

---
kind: "Deployment"
apiVersion: "apps/v1"
metadata:
  namespace: "velero"
  annotations: {}
  name: "velero"
  labels:
    helm.sh/chart: "velero-2.30.1"
    app.kubernetes.io/managed-by: "Helm"
    component: "velero"
    app.kubernetes.io/name: "velero"
    app.kubernetes.io/instance: "velero"
    app.kubernetes.io/component: "deployment.velero"
spec:
  replicas: 1
  revisionHistoryLimit: 5
  selector:
    matchLabels:
      app.kubernetes.io/name: "velero"
      app.kubernetes.io/instance: "velero"
    matchExpressions: []
  strategy:
    type: "RollingUpdate"
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  securityContext:
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    runAsUser: 65532
  template:
    metadata:
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/path: "/metrics"
        prometheus.io/port: "8085"
      labels:
        helm.sh/chart: "velero-2.30.1"
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/name: "velero"
        name: "velero"
        app.kubernetes.io/instance: "velero"
        app.kubernetes.io/component: "deployment.velero"
    spec:
      restartPolicy: "Always"
      terminationGracePeriodSeconds: 30
      nodeSelector: {}
      serviceAccountName: "velero-server"
      dnsPolicy: "ClusterFirst"
      volumes:
      - name: "cloud-credentials"
        secret:
          secretName: "cloud-credentials"
      - name: "plugins"
        emptyDir: {}
      - name: "scratch"
        emptyDir: {}
      containers:
      - name: "velero"
        image: "velero/velero:v1.9.0"
        securityContext:
          allowPrivilegeEscalation: false
          runAsNonRoot: true
        command:
        - "/velero"
        args:
        - "server"
        - "--features=EnableCSI"
        imagePullPolicy: "IfNotPresent"
        ports:
        - name: "http-monitoring"
          containerPort: 8085
          protocol: "TCP"
        env:
        - name: "VELERO_SCRATCH_DIR"
          value: "/scratch"
        - name: "VELERO_NAMESPACE"
          valueFrom:
            fieldRef:
              apiVersion: "v1"
              fieldPath: "metadata.namespace"
        - name: "LD_LIBRARY_PATH"
          value: "/plugins"
        - name: "AWS_SHARED_CREDENTIALS_FILE"
          value: "/credentials/cloud"
        volumeMounts:
        - name: "plugins"
          mountPath: "/plugins"
        - name: "cloud-credentials"
          mountPath: "/credentials"
        - name: "scratch"
          mountPath: "/scratch"
        resources:
          limits:
            cpu: "1000m"
            memory: "512Mi"
          requests:
            cpu: "500m"
            memory: "128Mi"
      initContainers:
      - name: "velero-plugin-for-csi"
        image: "velero/velero-plugin-for-csi:v0.3.0"
        securityContext:
          allowPrivilegeEscalation: false
          runAsNonRoot: true
        command: []
        args: []
        imagePullPolicy: "IfNotPresent"
        volumeMounts:
        - name: "plugins"
          mountPath: "/target"
      - name: "velero-plugin-for-aws"
        image: "velero/velero-plugin-for-aws:v1.5.0"
        securityContext:
          allowPrivilegeEscalation: false
          runAsNonRoot: true
        command: []
        args: []
        imagePullPolicy: "IfNotPresent"
        volumeMounts:
        - name: "plugins"
          mountPath: "/target"

---
apiVersion: "apps/v1"
kind: "DaemonSet"
metadata:
  namespace: "velero"
  annotations: {}
  name: "restic"
  labels:
    helm.sh/chart: "velero-2.30.1"
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/name: "restic"
    app.kubernetes.io/instance: "restic"
    app.kubernetes.io/component: "daemonset.restic"
spec:
  minReadySeconds: 0
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      helm.sh/chart: "velero-2.30.1"
      app.kubernetes.io/managed-by: "Helm"
      app.kubernetes.io/name: "restic"
      name: "restic"
      app.kubernetes.io/instance: "restic"
      app.kubernetes.io/component: "daemonset.restic"
    matchExpressions: []
  template:
    metadata:
      annotations: {}
      labels:
        helm.sh/chart: "velero-2.30.1"
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/name: "restic"
        name: "restic"
        app.kubernetes.io/instance: "restic"
        app.kubernetes.io/component: "daemonset.restic"
    spec:
      terminationGracePeriodSeconds: 30
      nodeSelector: {}
      serviceAccountName: "velero-server"
      dnsPolicy: "ClusterFirst"
      volumes:
      - name: "cloud-credentials"
        secret:
          secretName: "cloud-credentials"
      - name: "host-pods"
        hostPath:
          path: "/var/lib/kubelet/pods"
      - name: "scratch"
        emptyDir: {}
      containers:
      - name: "restic"
        image: "velero/velero:v1.9.0"
        command:
        - "/velero"
        args:
        - "restic"
        - "server"
        - "--features=EnableCSI"
        imagePullPolicy: "IfNotPresent"
        env:
        - name: "VELERO_NAMESPACE"
          valueFrom:
            fieldRef:
              apiVersion: "v1"
              fieldPath: "metadata.namespace"
        - name: "NODE_NAME"
          valueFrom:
            fieldRef:
              apiVersion: "v1"
              fieldPath: "spec.nodeName"
        - name: "VELERO_SCRATCH_DIR"
          value: "/scratch"
        - name: "AWS_SHARED_CREDENTIALS_FILE"
          value: "/credentials/cloud"
        volumeMounts:
        - name: "cloud-credentials"
          mountPath: "/credentials"
        - mountPropagation: "HostToContainer"
          name: "host-pods"
          mountPath: "/host_pods"
        - name: "scratch"
          mountPath: "/scratch"
        securityContext:
          privileged: false
          allowPrivilegeEscalation: false
          runAsNonRoot: true
        resources:
          limits:
            cpu: "1000m"
            memory: "1024Mi"
          requests:
            cpu: "500m"
            memory: "512Mi"
      securityContext:
        allowPrivilegeEscalation: false
        runAsNonRoot: true
        supplementalGroups: []
  updateStrategy:
    type: "RollingUpdate"
    rollingUpdate:
      maxUnavailable: 1

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "backups.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "Backup"
    listKind: "BackupList"
    plural: "backups"
    shortNames: []
    singular: "backup"
  versions:
  - name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: "Backup is a Velero resource that represents the capture of Kubernetes\
          \ cluster state at a point in time (API objects and associated volume state)."
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "BackupSpec defines the specification for a Velero backup."
            type: "object"
            properties:
              metadata:
                type: "object"
                properties:
                  labels:
                    additionalProperties:
                      type: "string"
                    type: "object"
              excludedResources:
                nullable: true
                description: "ExcludedResources is a slice of resource names that\
                  \ are not included in the backup."
                type: "array"
                items:
                  type: "string"
              defaultVolumesToRestic:
                description: "DefaultVolumesToRestic specifies whether restic should\
                  \ be used to take a backup of all pod volumes by default."
                type: "boolean"
              labelSelector:
                nullable: true
                description: "LabelSelector is a metav1.LabelSelector to filter with\
                  \ when adding individual objects to the backup. If empty or nil,\
                  \ all objects are included. Optional."
                type: "object"
                properties:
                  matchExpressions:
                    description: "matchExpressions is a list of label selector requirements.\
                      \ The requirements are ANDed."
                    type: "array"
                    items:
                      description: "A label selector requirement is a selector that\
                        \ contains values, a key, and an operator that relates the\
                        \ key and values."
                      type: "object"
                      properties:
                        values:
                          description: "values is an array of string values. If the\
                            \ operator is In or NotIn, the values array must be non-empty.\
                            \ If the operator is Exists or DoesNotExist, the values\
                            \ array must be empty. This array is replaced during a\
                            \ strategic merge patch."
                          type: "array"
                          items:
                            type: "string"
                        key:
                          description: "key is the label key that the selector applies\
                            \ to."
                          type: "string"
                        operator:
                          description: "operator represents a key's relationship to\
                            \ a set of values. Valid operators are In, NotIn, Exists\
                            \ and DoesNotExist."
                          type: "string"
                      required:
                      - "key"
                      - "operator"
                  matchLabels:
                    description: "matchLabels is a map of {key,value} pairs. A single\
                      \ {key,value} in the matchLabels map is equivalent to an element\
                      \ of matchExpressions, whose key field is \"key\", the operator\
                      \ is \"In\", and the values array contains only \"value\". The\
                      \ requirements are ANDed."
                    additionalProperties:
                      type: "string"
                    type: "object"
              includedNamespaces:
                nullable: true
                description: "IncludedNamespaces is a slice of namespace names to\
                  \ include objects from. If empty, all namespaces are included."
                type: "array"
                items:
                  type: "string"
              storageLocation:
                description: "StorageLocation is a string containing the name of a\
                  \ BackupStorageLocation where the backup should be stored."
                type: "string"
              volumeSnapshotLocations:
                description: "VolumeSnapshotLocations is a list containing names of\
                  \ VolumeSnapshotLocations associated with this backup."
                type: "array"
                items:
                  type: "string"
              includeClusterResources:
                nullable: true
                description: "IncludeClusterResources specifies whether cluster-scoped\
                  \ resources should be included for consideration in the backup."
                type: "boolean"
              ttl:
                description: "TTL is a time.Duration-parseable string describing how\
                  \ long the Backup should be retained for."
                type: "string"
              orderedResources:
                nullable: true
                description: "OrderedResources specifies the backup order of resources\
                  \ of specific Kind. The map key is the Kind name and value is a\
                  \ list of resource names separated by commas. Each resource name\
                  \ has format \"namespace/resourcename\".  For cluster resources,\
                  \ simply use \"resourcename\"."
                additionalProperties:
                  type: "string"
                type: "object"
              orLabelSelectors:
                nullable: true
                description: "OrLabelSelectors is list of metav1.LabelSelector to\
                  \ filter with when adding individual objects to the backup. If multiple\
                  \ provided they will be joined by the OR operator. LabelSelector\
                  \ as well as OrLabelSelectors cannot co-exist in backup request,\
                  \ only one of them can be used."
                type: "array"
                items:
                  description: "A label selector is a label query over a set of resources.\
                    \ The result of matchLabels and matchExpressions are ANDed. An\
                    \ empty label selector matches all objects. A null label selector\
                    \ matches no objects."
                  type: "object"
                  properties:
                    matchExpressions:
                      description: "matchExpressions is a list of label selector requirements.\
                        \ The requirements are ANDed."
                      type: "array"
                      items:
                        description: "A label selector requirement is a selector that\
                          \ contains values, a key, and an operator that relates the\
                          \ key and values."
                        type: "object"
                        properties:
                          values:
                            description: "values is an array of string values. If\
                              \ the operator is In or NotIn, the values array must\
                              \ be non-empty. If the operator is Exists or DoesNotExist,\
                              \ the values array must be empty. This array is replaced\
                              \ during a strategic merge patch."
                            type: "array"
                            items:
                              type: "string"
                          key:
                            description: "key is the label key that the selector applies\
                              \ to."
                            type: "string"
                          operator:
                            description: "operator represents a key's relationship\
                              \ to a set of values. Valid operators are In, NotIn,\
                              \ Exists and DoesNotExist."
                            type: "string"
                        required:
                        - "key"
                        - "operator"
                    matchLabels:
                      description: "matchLabels is a map of {key,value} pairs. A single\
                        \ {key,value} in the matchLabels map is equivalent to an element\
                        \ of matchExpressions, whose key field is \"key\", the operator\
                        \ is \"In\", and the values array contains only \"value\"\
                        . The requirements are ANDed."
                      additionalProperties:
                        type: "string"
                      type: "object"
              snapshotVolumes:
                nullable: true
                description: "SnapshotVolumes specifies whether to take cloud snapshots\
                  \ of any PV's referenced in the set of objects included in the Backup."
                type: "boolean"
              excludedNamespaces:
                nullable: true
                description: "ExcludedNamespaces contains a list of namespaces that\
                  \ are not included in the backup."
                type: "array"
                items:
                  type: "string"
              hooks:
                description: "Hooks represent custom behaviors that should be executed\
                  \ at different phases of the backup."
                type: "object"
                properties:
                  resources:
                    nullable: true
                    description: "Resources are hooks that should be executed when\
                      \ backing up individual instances of a resource."
                    type: "array"
                    items:
                      description: "BackupResourceHookSpec defines one or more BackupResourceHooks\
                        \ that should be executed based on the rules defined for namespaces,\
                        \ resources, and label selector."
                      type: "object"
                      properties:
                        pre:
                          description: "PreHooks is a list of BackupResourceHooks\
                            \ to execute prior to storing the item in the backup.\
                            \ These are executed before any \"additional items\" from\
                            \ item actions are processed."
                          type: "array"
                          items:
                            description: "BackupResourceHook defines a hook for a\
                              \ resource."
                            type: "object"
                            properties:
                              exec:
                                description: "Exec defines an exec hook."
                                type: "object"
                                properties:
                                  container:
                                    description: "Container is the container in the\
                                      \ pod where the command should be executed.\
                                      \ If not specified, the pod's first container\
                                      \ is used."
                                    type: "string"
                                  onError:
                                    description: "OnError specifies how Velero should\
                                      \ behave if it encounters an error executing\
                                      \ this hook."
                                    type: "string"
                                    enum:
                                    - "Continue"
                                    - "Fail"
                                  command:
                                    minItems: 1
                                    description: "Command is the command and arguments\
                                      \ to execute."
                                    type: "array"
                                    items:
                                      type: "string"
                                  timeout:
                                    description: "Timeout defines the maximum amount\
                                      \ of time Velero should wait for the hook to\
                                      \ complete before considering the execution\
                                      \ a failure."
                                    type: "string"
                                required:
                                - "command"
                            required:
                            - "exec"
                        excludedResources:
                          nullable: true
                          description: "ExcludedResources specifies the resources\
                            \ to which this hook spec does not apply."
                          type: "array"
                          items:
                            type: "string"
                        post:
                          description: "PostHooks is a list of BackupResourceHooks\
                            \ to execute after storing the item in the backup. These\
                            \ are executed after all \"additional items\" from item\
                            \ actions are processed."
                          type: "array"
                          items:
                            description: "BackupResourceHook defines a hook for a\
                              \ resource."
                            type: "object"
                            properties:
                              exec:
                                description: "Exec defines an exec hook."
                                type: "object"
                                properties:
                                  container:
                                    description: "Container is the container in the\
                                      \ pod where the command should be executed.\
                                      \ If not specified, the pod's first container\
                                      \ is used."
                                    type: "string"
                                  onError:
                                    description: "OnError specifies how Velero should\
                                      \ behave if it encounters an error executing\
                                      \ this hook."
                                    type: "string"
                                    enum:
                                    - "Continue"
                                    - "Fail"
                                  command:
                                    minItems: 1
                                    description: "Command is the command and arguments\
                                      \ to execute."
                                    type: "array"
                                    items:
                                      type: "string"
                                  timeout:
                                    description: "Timeout defines the maximum amount\
                                      \ of time Velero should wait for the hook to\
                                      \ complete before considering the execution\
                                      \ a failure."
                                    type: "string"
                                required:
                                - "command"
                            required:
                            - "exec"
                        labelSelector:
                          nullable: true
                          description: "LabelSelector, if specified, filters the resources\
                            \ to which this hook spec applies."
                          type: "object"
                          properties:
                            matchExpressions:
                              description: "matchExpressions is a list of label selector\
                                \ requirements. The requirements are ANDed."
                              type: "array"
                              items:
                                description: "A label selector requirement is a selector\
                                  \ that contains values, a key, and an operator that\
                                  \ relates the key and values."
                                type: "object"
                                properties:
                                  values:
                                    description: "values is an array of string values.\
                                      \ If the operator is In or NotIn, the values\
                                      \ array must be non-empty. If the operator is\
                                      \ Exists or DoesNotExist, the values array must\
                                      \ be empty. This array is replaced during a\
                                      \ strategic merge patch."
                                    type: "array"
                                    items:
                                      type: "string"
                                  key:
                                    description: "key is the label key that the selector\
                                      \ applies to."
                                    type: "string"
                                  operator:
                                    description: "operator represents a key's relationship\
                                      \ to a set of values. Valid operators are In,\
                                      \ NotIn, Exists and DoesNotExist."
                                    type: "string"
                                required:
                                - "key"
                                - "operator"
                            matchLabels:
                              description: "matchLabels is a map of {key,value} pairs.\
                                \ A single {key,value} in the matchLabels map is equivalent\
                                \ to an element of matchExpressions, whose key field\
                                \ is \"key\", the operator is \"In\", and the values\
                                \ array contains only \"value\". The requirements\
                                \ are ANDed."
                              additionalProperties:
                                type: "string"
                              type: "object"
                        name:
                          description: "Name is the name of this hook."
                          type: "string"
                        includedNamespaces:
                          nullable: true
                          description: "IncludedNamespaces specifies the namespaces\
                            \ to which this hook spec applies. If empty, it applies\
                            \ to all namespaces."
                          type: "array"
                          items:
                            type: "string"
                        excludedNamespaces:
                          nullable: true
                          description: "ExcludedNamespaces specifies the namespaces\
                            \ to which this hook spec does not apply."
                          type: "array"
                          items:
                            type: "string"
                        includedResources:
                          nullable: true
                          description: "IncludedResources specifies the resources\
                            \ to which this hook spec applies. If empty, it applies\
                            \ to all resources."
                          type: "array"
                          items:
                            type: "string"
                      required:
                      - "name"
              includedResources:
                nullable: true
                description: "IncludedResources is a slice of resource names to include\
                  \ in the backup. If empty, all resources are included."
                type: "array"
                items:
                  type: "string"
          status:
            description: "BackupStatus captures the current status of a Velero backup."
            type: "object"
            properties:
              phase:
                description: "Phase is the current state of the Backup."
                type: "string"
                enum:
                - "New"
                - "FailedValidation"
                - "InProgress"
                - "Completed"
                - "PartiallyFailed"
                - "Failed"
                - "Deleting"
              warnings:
                description: "Warnings is a count of all warning messages that were\
                  \ generated during execution of the backup. The actual warnings\
                  \ are in the backup's log file in object storage."
                type: "integer"
              csiVolumeSnapshotsCompleted:
                description: "CSIVolumeSnapshotsCompleted is the total number of successfully\
                  \ completed CSI VolumeSnapshots for this backup."
                type: "integer"
              csiVolumeSnapshotsAttempted:
                description: "CSIVolumeSnapshotsAttempted is the total number of attempted\
                  \ CSI VolumeSnapshots for this backup."
                type: "integer"
              version:
                description: "Version is the backup format major version. Deprecated:\
                  \ Please see FormatVersion"
                type: "integer"
              volumeSnapshotsAttempted:
                description: "VolumeSnapshotsAttempted is the total number of attempted\
                  \ volume snapshots for this backup."
                type: "integer"
              completionTimestamp:
                nullable: true
                format: "date-time"
                description: "CompletionTimestamp records the time a backup was completed.\
                  \ Completion time is recorded even on failed backups. Completion\
                  \ time is recorded before uploading the backup object. The server's\
                  \ time is used for CompletionTimestamps"
                type: "string"
              failureReason:
                description: "FailureReason is an error that caused the entire backup\
                  \ to fail."
                type: "string"
              progress:
                nullable: true
                description: "Progress contains information about the backup's execution\
                  \ progress. Note that this information is best-effort only -- if\
                  \ Velero fails to update it during a backup for any reason, it may\
                  \ be inaccurate/stale."
                type: "object"
                properties:
                  totalItems:
                    description: "TotalItems is the total number of items to be backed\
                      \ up. This number may change throughout the execution of the\
                      \ backup due to plugins that return additional related items\
                      \ to back up, the velero.io/exclude-from-backup label, and various\
                      \ other filters that happen as items are processed."
                    type: "integer"
                  itemsBackedUp:
                    description: "ItemsBackedUp is the number of items that have actually\
                      \ been written to the backup tarball so far."
                    type: "integer"
              validationErrors:
                nullable: true
                description: "ValidationErrors is a slice of all validation errors\
                  \ (if applicable)."
                type: "array"
                items:
                  type: "string"
              volumeSnapshotsCompleted:
                description: "VolumeSnapshotsCompleted is the total number of successfully\
                  \ completed volume snapshots for this backup."
                type: "integer"
              expiration:
                nullable: true
                format: "date-time"
                description: "Expiration is when this Backup is eligible for garbage-collection."
                type: "string"
              formatVersion:
                description: "FormatVersion is the backup format version, including\
                  \ major, minor, and patch version."
                type: "string"
              errors:
                description: "Errors is a count of all error messages that were generated\
                  \ during execution of the backup.  The actual errors are in the\
                  \ backup's log file in object storage."
                type: "integer"
              startTimestamp:
                nullable: true
                format: "date-time"
                description: "StartTimestamp records the time a backup was started.\
                  \ Separate from CreationTimestamp, since that value changes on restores.\
                  \ The server's time is used for StartTimestamps"
                type: "string"

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "volumesnapshotlocations.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "VolumeSnapshotLocation"
    listKind: "VolumeSnapshotLocationList"
    plural: "volumesnapshotlocations"
    shortNames: []
    singular: "volumesnapshotlocation"
  versions:
  - name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: "VolumeSnapshotLocation is a location where Velero stores volume\
          \ snapshots."
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "VolumeSnapshotLocationSpec defines the specification for\
              \ a Velero VolumeSnapshotLocation."
            type: "object"
            properties:
              provider:
                description: "Provider is the provider of the volume storage."
                type: "string"
              config:
                description: "Config is for provider-specific configuration fields."
                additionalProperties:
                  type: "string"
                type: "object"
            required:
            - "provider"
          status:
            description: "VolumeSnapshotLocationStatus describes the current status\
              \ of a Velero VolumeSnapshotLocation."
            type: "object"
            properties:
              phase:
                description: "VolumeSnapshotLocationPhase is the lifecycle phase of\
                  \ a Velero VolumeSnapshotLocation."
                type: "string"
                enum:
                - "Available"
                - "Unavailable"

---
apiVersion: "v1"
kind: "Service"
metadata:
  namespace: "velero"
  annotations: {}
  name: "velero"
  labels:
    helm.sh/chart: "velero-2.30.1"
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/name: "velero"
    app.kubernetes.io/instance: "velero"
spec:
  externalIPs: []
  loadBalancerSourceRanges: []
  type: "ClusterIP"
  selector:
    app.kubernetes.io/name: "velero"
    name: "velero"
    app.kubernetes.io/instance: "velero"
  ports:
  - name: "http-monitoring"
    port: 8085
    targetPort: "http-monitoring"

---
apiVersion: "rbac.authorization.k8s.io/v1"
kind: "Role"
metadata:
  namespace: "velero"
  annotations: {}
  name: "velero-server"
  labels:
    helm.sh/chart: "velero-2.30.1"
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/name: "velero"
    app.kubernetes.io/instance: "velero"
    app.kubernetes.io/component: "server"
rules:
- apiGroups:
  - "*"
  nonResourceURLs: []
  resourceNames: []
  resources:
  - "*"
  verbs:
  - "*"

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "schedules.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "Schedule"
    listKind: "ScheduleList"
    plural: "schedules"
    shortNames: []
    singular: "schedule"
  versions:
  - additionalPrinterColumns:
    - name: "Status"
      description: "Status of the schedule"
      jsonPath: ".status.phase"
      type: "string"
    - name: "Schedule"
      description: "A Cron expression defining when to run the Backup"
      jsonPath: ".spec.schedule"
      type: "string"
    - name: "LastBackup"
      description: "The last time a Backup was run for this schedule"
      jsonPath: ".status.lastBackup"
      type: "date"
    - name: "Age"
      jsonPath: ".metadata.creationTimestamp"
      type: "date"
    name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: "Schedule is a Velero resource that represents a pre-scheduled\
          \ or periodic Backup that should be run."
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "ScheduleSpec defines the specification for a Velero schedule"
            type: "object"
            properties:
              template:
                description: "Template is the definition of the Backup to be run on\
                  \ the provided schedule"
                type: "object"
                properties:
                  metadata:
                    type: "object"
                    properties:
                      labels:
                        additionalProperties:
                          type: "string"
                        type: "object"
                  excludedResources:
                    nullable: true
                    description: "ExcludedResources is a slice of resource names that\
                      \ are not included in the backup."
                    type: "array"
                    items:
                      type: "string"
                  defaultVolumesToRestic:
                    description: "DefaultVolumesToRestic specifies whether restic\
                      \ should be used to take a backup of all pod volumes by default."
                    type: "boolean"
                  labelSelector:
                    nullable: true
                    description: "LabelSelector is a metav1.LabelSelector to filter\
                      \ with when adding individual objects to the backup. If empty\
                      \ or nil, all objects are included. Optional."
                    type: "object"
                    properties:
                      matchExpressions:
                        description: "matchExpressions is a list of label selector\
                          \ requirements. The requirements are ANDed."
                        type: "array"
                        items:
                          description: "A label selector requirement is a selector\
                            \ that contains values, a key, and an operator that relates\
                            \ the key and values."
                          type: "object"
                          properties:
                            values:
                              description: "values is an array of string values. If\
                                \ the operator is In or NotIn, the values array must\
                                \ be non-empty. If the operator is Exists or DoesNotExist,\
                                \ the values array must be empty. This array is replaced\
                                \ during a strategic merge patch."
                              type: "array"
                              items:
                                type: "string"
                            key:
                              description: "key is the label key that the selector\
                                \ applies to."
                              type: "string"
                            operator:
                              description: "operator represents a key's relationship\
                                \ to a set of values. Valid operators are In, NotIn,\
                                \ Exists and DoesNotExist."
                              type: "string"
                          required:
                          - "key"
                          - "operator"
                      matchLabels:
                        description: "matchLabels is a map of {key,value} pairs. A\
                          \ single {key,value} in the matchLabels map is equivalent\
                          \ to an element of matchExpressions, whose key field is\
                          \ \"key\", the operator is \"In\", and the values array\
                          \ contains only \"value\". The requirements are ANDed."
                        additionalProperties:
                          type: "string"
                        type: "object"
                  includedNamespaces:
                    nullable: true
                    description: "IncludedNamespaces is a slice of namespace names\
                      \ to include objects from. If empty, all namespaces are included."
                    type: "array"
                    items:
                      type: "string"
                  storageLocation:
                    description: "StorageLocation is a string containing the name\
                      \ of a BackupStorageLocation where the backup should be stored."
                    type: "string"
                  volumeSnapshotLocations:
                    description: "VolumeSnapshotLocations is a list containing names\
                      \ of VolumeSnapshotLocations associated with this backup."
                    type: "array"
                    items:
                      type: "string"
                  includeClusterResources:
                    nullable: true
                    description: "IncludeClusterResources specifies whether cluster-scoped\
                      \ resources should be included for consideration in the backup."
                    type: "boolean"
                  ttl:
                    description: "TTL is a time.Duration-parseable string describing\
                      \ how long the Backup should be retained for."
                    type: "string"
                  orderedResources:
                    nullable: true
                    description: "OrderedResources specifies the backup order of resources\
                      \ of specific Kind. The map key is the Kind name and value is\
                      \ a list of resource names separated by commas. Each resource\
                      \ name has format \"namespace/resourcename\".  For cluster resources,\
                      \ simply use \"resourcename\"."
                    additionalProperties:
                      type: "string"
                    type: "object"
                  orLabelSelectors:
                    nullable: true
                    description: "OrLabelSelectors is list of metav1.LabelSelector\
                      \ to filter with when adding individual objects to the backup.\
                      \ If multiple provided they will be joined by the OR operator.\
                      \ LabelSelector as well as OrLabelSelectors cannot co-exist\
                      \ in backup request, only one of them can be used."
                    type: "array"
                    items:
                      description: "A label selector is a label query over a set of\
                        \ resources. The result of matchLabels and matchExpressions\
                        \ are ANDed. An empty label selector matches all objects.\
                        \ A null label selector matches no objects."
                      type: "object"
                      properties:
                        matchExpressions:
                          description: "matchExpressions is a list of label selector\
                            \ requirements. The requirements are ANDed."
                          type: "array"
                          items:
                            description: "A label selector requirement is a selector\
                              \ that contains values, a key, and an operator that\
                              \ relates the key and values."
                            type: "object"
                            properties:
                              values:
                                description: "values is an array of string values.\
                                  \ If the operator is In or NotIn, the values array\
                                  \ must be non-empty. If the operator is Exists or\
                                  \ DoesNotExist, the values array must be empty.\
                                  \ This array is replaced during a strategic merge\
                                  \ patch."
                                type: "array"
                                items:
                                  type: "string"
                              key:
                                description: "key is the label key that the selector\
                                  \ applies to."
                                type: "string"
                              operator:
                                description: "operator represents a key's relationship\
                                  \ to a set of values. Valid operators are In, NotIn,\
                                  \ Exists and DoesNotExist."
                                type: "string"
                            required:
                            - "key"
                            - "operator"
                        matchLabels:
                          description: "matchLabels is a map of {key,value} pairs.\
                            \ A single {key,value} in the matchLabels map is equivalent\
                            \ to an element of matchExpressions, whose key field is\
                            \ \"key\", the operator is \"In\", and the values array\
                            \ contains only \"value\". The requirements are ANDed."
                          additionalProperties:
                            type: "string"
                          type: "object"
                  snapshotVolumes:
                    nullable: true
                    description: "SnapshotVolumes specifies whether to take cloud\
                      \ snapshots of any PV's referenced in the set of objects included\
                      \ in the Backup."
                    type: "boolean"
                  excludedNamespaces:
                    nullable: true
                    description: "ExcludedNamespaces contains a list of namespaces\
                      \ that are not included in the backup."
                    type: "array"
                    items:
                      type: "string"
                  hooks:
                    description: "Hooks represent custom behaviors that should be\
                      \ executed at different phases of the backup."
                    type: "object"
                    properties:
                      resources:
                        nullable: true
                        description: "Resources are hooks that should be executed\
                          \ when backing up individual instances of a resource."
                        type: "array"
                        items:
                          description: "BackupResourceHookSpec defines one or more\
                            \ BackupResourceHooks that should be executed based on\
                            \ the rules defined for namespaces, resources, and label\
                            \ selector."
                          type: "object"
                          properties:
                            pre:
                              description: "PreHooks is a list of BackupResourceHooks\
                                \ to execute prior to storing the item in the backup.\
                                \ These are executed before any \"additional items\"\
                                \ from item actions are processed."
                              type: "array"
                              items:
                                description: "BackupResourceHook defines a hook for\
                                  \ a resource."
                                type: "object"
                                properties:
                                  exec:
                                    description: "Exec defines an exec hook."
                                    type: "object"
                                    properties:
                                      container:
                                        description: "Container is the container in\
                                          \ the pod where the command should be executed.\
                                          \ If not specified, the pod's first container\
                                          \ is used."
                                        type: "string"
                                      onError:
                                        description: "OnError specifies how Velero\
                                          \ should behave if it encounters an error\
                                          \ executing this hook."
                                        type: "string"
                                        enum:
                                        - "Continue"
                                        - "Fail"
                                      command:
                                        minItems: 1
                                        description: "Command is the command and arguments\
                                          \ to execute."
                                        type: "array"
                                        items:
                                          type: "string"
                                      timeout:
                                        description: "Timeout defines the maximum\
                                          \ amount of time Velero should wait for\
                                          \ the hook to complete before considering\
                                          \ the execution a failure."
                                        type: "string"
                                    required:
                                    - "command"
                                required:
                                - "exec"
                            excludedResources:
                              nullable: true
                              description: "ExcludedResources specifies the resources\
                                \ to which this hook spec does not apply."
                              type: "array"
                              items:
                                type: "string"
                            post:
                              description: "PostHooks is a list of BackupResourceHooks\
                                \ to execute after storing the item in the backup.\
                                \ These are executed after all \"additional items\"\
                                \ from item actions are processed."
                              type: "array"
                              items:
                                description: "BackupResourceHook defines a hook for\
                                  \ a resource."
                                type: "object"
                                properties:
                                  exec:
                                    description: "Exec defines an exec hook."
                                    type: "object"
                                    properties:
                                      container:
                                        description: "Container is the container in\
                                          \ the pod where the command should be executed.\
                                          \ If not specified, the pod's first container\
                                          \ is used."
                                        type: "string"
                                      onError:
                                        description: "OnError specifies how Velero\
                                          \ should behave if it encounters an error\
                                          \ executing this hook."
                                        type: "string"
                                        enum:
                                        - "Continue"
                                        - "Fail"
                                      command:
                                        minItems: 1
                                        description: "Command is the command and arguments\
                                          \ to execute."
                                        type: "array"
                                        items:
                                          type: "string"
                                      timeout:
                                        description: "Timeout defines the maximum\
                                          \ amount of time Velero should wait for\
                                          \ the hook to complete before considering\
                                          \ the execution a failure."
                                        type: "string"
                                    required:
                                    - "command"
                                required:
                                - "exec"
                            labelSelector:
                              nullable: true
                              description: "LabelSelector, if specified, filters the\
                                \ resources to which this hook spec applies."
                              type: "object"
                              properties:
                                matchExpressions:
                                  description: "matchExpressions is a list of label\
                                    \ selector requirements. The requirements are\
                                    \ ANDed."
                                  type: "array"
                                  items:
                                    description: "A label selector requirement is\
                                      \ a selector that contains values, a key, and\
                                      \ an operator that relates the key and values."
                                    type: "object"
                                    properties:
                                      values:
                                        description: "values is an array of string\
                                          \ values. If the operator is In or NotIn,\
                                          \ the values array must be non-empty. If\
                                          \ the operator is Exists or DoesNotExist,\
                                          \ the values array must be empty. This array\
                                          \ is replaced during a strategic merge patch."
                                        type: "array"
                                        items:
                                          type: "string"
                                      key:
                                        description: "key is the label key that the\
                                          \ selector applies to."
                                        type: "string"
                                      operator:
                                        description: "operator represents a key's\
                                          \ relationship to a set of values. Valid\
                                          \ operators are In, NotIn, Exists and DoesNotExist."
                                        type: "string"
                                    required:
                                    - "key"
                                    - "operator"
                                matchLabels:
                                  description: "matchLabels is a map of {key,value}\
                                    \ pairs. A single {key,value} in the matchLabels\
                                    \ map is equivalent to an element of matchExpressions,\
                                    \ whose key field is \"key\", the operator is\
                                    \ \"In\", and the values array contains only \"\
                                    value\". The requirements are ANDed."
                                  additionalProperties:
                                    type: "string"
                                  type: "object"
                            name:
                              description: "Name is the name of this hook."
                              type: "string"
                            includedNamespaces:
                              nullable: true
                              description: "IncludedNamespaces specifies the namespaces\
                                \ to which this hook spec applies. If empty, it applies\
                                \ to all namespaces."
                              type: "array"
                              items:
                                type: "string"
                            excludedNamespaces:
                              nullable: true
                              description: "ExcludedNamespaces specifies the namespaces\
                                \ to which this hook spec does not apply."
                              type: "array"
                              items:
                                type: "string"
                            includedResources:
                              nullable: true
                              description: "IncludedResources specifies the resources\
                                \ to which this hook spec applies. If empty, it applies\
                                \ to all resources."
                              type: "array"
                              items:
                                type: "string"
                          required:
                          - "name"
                  includedResources:
                    nullable: true
                    description: "IncludedResources is a slice of resource names to\
                      \ include in the backup. If empty, all resources are included."
                    type: "array"
                    items:
                      type: "string"
              schedule:
                description: "Schedule is a Cron expression defining when to run the\
                  \ Backup."
                type: "string"
              useOwnerReferencesInBackup:
                nullable: true
                description: "UseOwnerReferencesBackup specifies whether to use OwnerReferences\
                  \ on backups created by this Schedule."
                type: "boolean"
            required:
            - "schedule"
            - "template"
          status:
            description: "ScheduleStatus captures the current state of a Velero schedule"
            type: "object"
            properties:
              phase:
                description: "Phase is the current phase of the Schedule"
                type: "string"
                enum:
                - "New"
                - "Enabled"
                - "FailedValidation"
              lastBackup:
                nullable: true
                format: "date-time"
                description: "LastBackup is the last time a Backup was run for this\
                  \ Schedule schedule"
                type: "string"
              validationErrors:
                description: "ValidationErrors is a slice of all validation errors\
                  \ (if applicable)"
                type: "array"
                items:
                  type: "string"
    subresources: {}

---
apiVersion: "rbac.authorization.k8s.io/v1"
kind: "RoleBinding"
metadata:
  namespace: "velero"
  annotations: {}
  name: "velero-server"
  labels:
    helm.sh/chart: "velero-2.30.1"
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/name: "velero"
    app.kubernetes.io/instance: "velero"
    app.kubernetes.io/component: "server"
roleRef:
  apiGroup: "rbac.authorization.k8s.io"
  kind: "Role"
  name: "velero-server"
subjects:
- kind: "ServiceAccount"
  name: "velero-server"
  namespace: "velero"

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "podvolumebackups.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "PodVolumeBackup"
    listKind: "PodVolumeBackupList"
    plural: "podvolumebackups"
    shortNames: []
    singular: "podvolumebackup"
  versions:
  - additionalPrinterColumns:
    - name: "Status"
      description: "Pod Volume Backup status such as New/InProgress"
      jsonPath: ".status.phase"
      type: "string"
    - name: "Created"
      description: "Time when this backup was started"
      jsonPath: ".status.startTimestamp"
      type: "date"
    - name: "Namespace"
      description: "Namespace of the pod containing the volume to be backed up"
      jsonPath: ".spec.pod.namespace"
      type: "string"
    - name: "Pod"
      description: "Name of the pod containing the volume to be backed up"
      jsonPath: ".spec.pod.name"
      type: "string"
    - name: "Volume"
      description: "Name of the volume to be backed up"
      jsonPath: ".spec.volume"
      type: "string"
    - name: "Restic Repo"
      description: "Restic repository identifier for this backup"
      jsonPath: ".spec.repoIdentifier"
      type: "string"
    - name: "Storage Location"
      description: "Name of the Backup Storage Location where this backup should be\
        \ stored"
      jsonPath: ".spec.backupStorageLocation"
      type: "string"
    - name: "Age"
      jsonPath: ".metadata.creationTimestamp"
      type: "date"
    name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "PodVolumeBackupSpec is the specification for a PodVolumeBackup."
            type: "object"
            properties:
              volume:
                description: "Volume is the name of the volume within the Pod to be\
                  \ backed up."
                type: "string"
              node:
                description: "Node is the name of the node that the Pod is running\
                  \ on."
                type: "string"
              backupStorageLocation:
                description: "BackupStorageLocation is the name of the backup storage\
                  \ location where the restic repository is stored."
                type: "string"
              pod:
                description: "Pod is a reference to the pod containing the volume\
                  \ to be backed up."
                type: "object"
                properties:
                  uid:
                    description: "UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids"
                    type: "string"
                  apiVersion:
                    description: "API version of the referent."
                    type: "string"
                  kind:
                    description: "Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
                    type: "string"
                  resourceVersion:
                    description: "Specific resourceVersion to which this reference\
                      \ is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency"
                    type: "string"
                  fieldPath:
                    description: "If referring to a piece of an object instead of\
                      \ an entire object, this string should contain a valid JSON/Go\
                      \ field access statement, such as desiredState.manifest.containers[2].\
                      \ For example, if the object reference is to a container within\
                      \ a pod, this would take on a value like: \"spec.containers{name}\"\
                      \ (where \"name\" refers to the name of the container that triggered\
                      \ the event) or if no container name is specified \"spec.containers[2]\"\
                      \ (container with index 2 in this pod). This syntax is chosen\
                      \ only to have some well-defined way of referencing a part of\
                      \ an object. TODO: this design is not final and this field is\
                      \ subject to change in the future."
                    type: "string"
                  name:
                    description: "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names"
                    type: "string"
                  namespace:
                    description: "Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/"
                    type: "string"
              repoIdentifier:
                description: "RepoIdentifier is the restic repository identifier."
                type: "string"
              tags:
                description: "Tags are a map of key-value pairs that should be applied\
                  \ to the volume backup as tags."
                additionalProperties:
                  type: "string"
                type: "object"
            required:
            - "backupStorageLocation"
            - "node"
            - "pod"
            - "repoIdentifier"
            - "volume"
          status:
            description: "PodVolumeBackupStatus is the current status of a PodVolumeBackup."
            type: "object"
            properties:
              phase:
                description: "Phase is the current state of the PodVolumeBackup."
                type: "string"
                enum:
                - "New"
                - "InProgress"
                - "Completed"
                - "Failed"
              path:
                description: "Path is the full path within the controller pod being\
                  \ backed up."
                type: "string"
              completionTimestamp:
                nullable: true
                format: "date-time"
                description: "CompletionTimestamp records the time a backup was completed.\
                  \ Completion time is recorded even on failed backups. Completion\
                  \ time is recorded before uploading the backup object. The server's\
                  \ time is used for CompletionTimestamps"
                type: "string"
              snapshotID:
                description: "SnapshotID is the identifier for the snapshot of the\
                  \ pod volume."
                type: "string"
              progress:
                description: "Progress holds the total number of bytes of the volume\
                  \ and the current number of backed up bytes. This can be used to\
                  \ display progress information about the backup operation."
                type: "object"
                properties:
                  totalBytes:
                    format: "int64"
                    type: "integer"
                  bytesDone:
                    format: "int64"
                    type: "integer"
              message:
                description: "Message is a message about the pod volume backup's status."
                type: "string"
              startTimestamp:
                nullable: true
                format: "date-time"
                description: "StartTimestamp records the time a backup was started.\
                  \ Separate from CreationTimestamp, since that value changes on restores.\
                  \ The server's time is used for StartTimestamps"
                type: "string"
    subresources: {}

---
apiVersion: "v1"
kind: "ServiceAccount"
metadata:
  namespace: "velero"
  annotations: {}
  name: "velero-server"
  labels:
    helm.sh/chart: "velero-2.30.1"
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/name: "velero"
    app.kubernetes.io/instance: "velero"

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "resticrepositories.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "ResticRepository"
    listKind: "ResticRepositoryList"
    plural: "resticrepositories"
    shortNames: []
    singular: "resticrepository"
  versions:
  - additionalPrinterColumns:
    - name: "Age"
      jsonPath: ".metadata.creationTimestamp"
      type: "date"
    name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "ResticRepositorySpec is the specification for a ResticRepository."
            type: "object"
            properties:
              maintenanceFrequency:
                description: "MaintenanceFrequency is how often maintenance should\
                  \ be run."
                type: "string"
              volumeNamespace:
                description: "VolumeNamespace is the namespace this restic repository\
                  \ contains pod volume backups for."
                type: "string"
              backupStorageLocation:
                description: "BackupStorageLocation is the name of the BackupStorageLocation\
                  \ that should contain this repository."
                type: "string"
              resticIdentifier:
                description: "ResticIdentifier is the full restic-compatible string\
                  \ for identifying this repository."
                type: "string"
            required:
            - "backupStorageLocation"
            - "maintenanceFrequency"
            - "resticIdentifier"
            - "volumeNamespace"
          status:
            description: "ResticRepositoryStatus is the current status of a ResticRepository."
            type: "object"
            properties:
              phase:
                description: "Phase is the current state of the ResticRepository."
                type: "string"
                enum:
                - "New"
                - "Ready"
                - "NotReady"
              lastMaintenanceTime:
                nullable: true
                format: "date-time"
                description: "LastMaintenanceTime is the last time maintenance was\
                  \ run."
                type: "string"
              message:
                description: "Message is a message about the current status of the\
                  \ ResticRepository."
                type: "string"
    subresources: {}

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "backupstoragelocations.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "BackupStorageLocation"
    listKind: "BackupStorageLocationList"
    plural: "backupstoragelocations"
    shortNames:
    - "bsl"
    singular: "backupstoragelocation"
  versions:
  - additionalPrinterColumns:
    - name: "Phase"
      description: "Backup Storage Location status such as Available/Unavailable"
      jsonPath: ".status.phase"
      type: "string"
    - name: "Last Validated"
      description: "LastValidationTime is the last time the backup store location\
        \ was validated"
      jsonPath: ".status.lastValidationTime"
      type: "date"
    - name: "Age"
      jsonPath: ".metadata.creationTimestamp"
      type: "date"
    - name: "Default"
      description: "Default backup storage location"
      jsonPath: ".spec.default"
      type: "boolean"
    name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: "BackupStorageLocation is a location where Velero stores backup\
          \ objects"
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "BackupStorageLocationSpec defines the desired state of a\
              \ Velero BackupStorageLocation"
            type: "object"
            properties:
              backupSyncPeriod:
                nullable: true
                description: "BackupSyncPeriod defines how frequently to sync backup\
                  \ API objects from object storage. A value of 0 disables sync."
                type: "string"
              default:
                description: "Default indicates this location is the default backup\
                  \ storage location."
                type: "boolean"
              credential:
                description: "Credential contains the credential information intended\
                  \ to be used with this location"
                type: "object"
                properties:
                  name:
                    description: "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names\
                      \ TODO: Add other useful fields. apiVersion, kind, uid?"
                    type: "string"
                  optional:
                    description: "Specify whether the Secret or its key must be defined"
                    type: "boolean"
                  key:
                    description: "The key of the secret to select from.  Must be a\
                      \ valid secret key."
                    type: "string"
                required:
                - "key"
              provider:
                description: "Provider is the provider of the backup storage."
                type: "string"
              validationFrequency:
                nullable: true
                description: "ValidationFrequency defines how frequently to validate\
                  \ the corresponding object storage. A value of 0 disables validation."
                type: "string"
              objectStorage:
                description: "ObjectStorageLocation specifies the settings necessary\
                  \ to connect to a provider's object storage."
                type: "object"
                properties:
                  bucket:
                    description: "Bucket is the bucket to use for object storage."
                    type: "string"
                  caCert:
                    format: "byte"
                    description: "CACert defines a CA bundle to use when verifying\
                      \ TLS connections to the provider."
                    type: "string"
                  prefix:
                    description: "Prefix is the path inside a bucket to use for Velero\
                      \ storage. Optional."
                    type: "string"
                required:
                - "bucket"
              accessMode:
                description: "AccessMode defines the permissions for the backup storage\
                  \ location."
                type: "string"
                enum:
                - "ReadOnly"
                - "ReadWrite"
              config:
                description: "Config is for provider-specific configuration fields."
                additionalProperties:
                  type: "string"
                type: "object"
            required:
            - "objectStorage"
            - "provider"
          status:
            description: "BackupStorageLocationStatus defines the observed state of\
              \ BackupStorageLocation"
            type: "object"
            properties:
              phase:
                description: "Phase is the current state of the BackupStorageLocation."
                type: "string"
                enum:
                - "Available"
                - "Unavailable"
              lastSyncedTime:
                nullable: true
                format: "date-time"
                description: "LastSyncedTime is the last time the contents of the\
                  \ location were synced into the cluster."
                type: "string"
              lastSyncedRevision:
                description: "LastSyncedRevision is the value of the `metadata/revision`\
                  \ file in the backup storage location the last time the BSL's contents\
                  \ were synced into the cluster. \n Deprecated: this field is no\
                  \ longer updated or used for detecting changes to the location's\
                  \ contents and will be removed entirely in v2.0."
                type: "string"
              lastValidationTime:
                nullable: true
                format: "date-time"
                description: "LastValidationTime is the last time the backup store\
                  \ location was validated the cluster."
                type: "string"
              accessMode:
                description: "AccessMode is an unused field. \n Deprecated: there\
                  \ is now an AccessMode field on the Spec and this field will be\
                  \ removed entirely as of v2.0."
                type: "string"
                enum:
                - "ReadOnly"
                - "ReadWrite"
              message:
                description: "Message is a message about the backup storage location's\
                  \ status."
                type: "string"
    subresources: {}

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "downloadrequests.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "DownloadRequest"
    listKind: "DownloadRequestList"
    plural: "downloadrequests"
    shortNames: []
    singular: "downloadrequest"
  versions:
  - name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: "DownloadRequest is a request to download an artifact from backup\
          \ object storage, such as a backup log file."
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "DownloadRequestSpec is the specification for a download\
              \ request."
            type: "object"
            properties:
              target:
                description: "Target is what to download (e.g. logs for a backup)."
                type: "object"
                properties:
                  kind:
                    description: "Kind is the type of file to download."
                    type: "string"
                    enum:
                    - "BackupLog"
                    - "BackupContents"
                    - "BackupVolumeSnapshots"
                    - "BackupItemSnapshots"
                    - "BackupResourceList"
                    - "RestoreLog"
                    - "RestoreResults"
                  name:
                    description: "Name is the name of the kubernetes resource with\
                      \ which the file is associated."
                    type: "string"
                required:
                - "kind"
                - "name"
            required:
            - "target"
          status:
            description: "DownloadRequestStatus is the current status of a DownloadRequest."
            type: "object"
            properties:
              phase:
                description: "Phase is the current state of the DownloadRequest."
                type: "string"
                enum:
                - "New"
                - "Processed"
              downloadURL:
                description: "DownloadURL contains the pre-signed URL for the target\
                  \ file."
                type: "string"
              expiration:
                nullable: true
                format: "date-time"
                description: "Expiration is when this DownloadRequest expires and\
                  \ can be deleted by the system."
                type: "string"

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "deletebackuprequests.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "DeleteBackupRequest"
    listKind: "DeleteBackupRequestList"
    plural: "deletebackuprequests"
    shortNames: []
    singular: "deletebackuprequest"
  versions:
  - additionalPrinterColumns:
    - name: "BackupName"
      description: "The name of the backup to be deleted"
      jsonPath: ".spec.backupName"
      type: "string"
    - name: "Status"
      description: "The status of the deletion request"
      jsonPath: ".status.phase"
      type: "string"
    name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: "DeleteBackupRequest is a request to delete one or more backups."
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "DeleteBackupRequestSpec is the specification for which backups\
              \ to delete."
            type: "object"
            properties:
              backupName:
                type: "string"
            required:
            - "backupName"
          status:
            description: "DeleteBackupRequestStatus is the current status of a DeleteBackupRequest."
            type: "object"
            properties:
              phase:
                description: "Phase is the current state of the DeleteBackupRequest."
                type: "string"
                enum:
                - "New"
                - "InProgress"
                - "Processed"
              errors:
                nullable: true
                description: "Errors contains any errors that were encountered during\
                  \ the deletion process."
                type: "array"
                items:
                  type: "string"
    subresources: {}

---
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: "v0.7.0"
  name: "podvolumerestores.velero.io"
  labels:
    app.kubernetes.io/name: "velero-aws"
    component: "velero"
spec:
  group: "velero.io"
  scope: "Namespaced"
  names:
    categories: []
    kind: "PodVolumeRestore"
    listKind: "PodVolumeRestoreList"
    plural: "podvolumerestores"
    shortNames: []
    singular: "podvolumerestore"
  versions:
  - additionalPrinterColumns:
    - name: "Namespace"
      description: "Namespace of the pod containing the volume to be restored"
      jsonPath: ".spec.pod.namespace"
      type: "string"
    - name: "Pod"
      description: "Name of the pod containing the volume to be restored"
      jsonPath: ".spec.pod.name"
      type: "string"
    - name: "Volume"
      description: "Name of the volume to be restored"
      jsonPath: ".spec.volume"
      type: "string"
    - name: "Status"
      description: "Pod Volume Restore status such as New/InProgress"
      jsonPath: ".status.phase"
      type: "string"
    - format: "int64"
      name: "TotalBytes"
      description: "Pod Volume Restore status such as New/InProgress"
      jsonPath: ".status.progress.totalBytes"
      type: "integer"
    - format: "int64"
      name: "BytesDone"
      description: "Pod Volume Restore status such as New/InProgress"
      jsonPath: ".status.progress.bytesDone"
      type: "integer"
    - name: "Age"
      jsonPath: ".metadata.creationTimestamp"
      type: "date"
    name: "v1"
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        type: "object"
        properties:
          metadata:
            type: "object"
          apiVersion:
            description: "APIVersion defines the versioned schema of this representation\
              \ of an object. Servers should convert recognized schemas to the latest\
              \ internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
            type: "string"
          kind:
            description: "Kind is a string value representing the REST resource this\
              \ object represents. Servers may infer this from the endpoint the client\
              \ submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
            type: "string"
          spec:
            description: "PodVolumeRestoreSpec is the specification for a PodVolumeRestore."
            type: "object"
            properties:
              volume:
                description: "Volume is the name of the volume within the Pod to be\
                  \ restored."
                type: "string"
              backupStorageLocation:
                description: "BackupStorageLocation is the name of the backup storage\
                  \ location where the restic repository is stored."
                type: "string"
              snapshotID:
                description: "SnapshotID is the ID of the volume snapshot to be restored."
                type: "string"
              pod:
                description: "Pod is a reference to the pod containing the volume\
                  \ to be restored."
                type: "object"
                properties:
                  uid:
                    description: "UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids"
                    type: "string"
                  apiVersion:
                    description: "API version of the referent."
                    type: "string"
                  kind:
                    description: "Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
                    type: "string"
                  resourceVersion:
                    description: "Specific resourceVersion to which this reference\
                      \ is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency"
                    type: "string"
                  fieldPath:
                    description: "If referring to a piece of an object instead of\
                      \ an entire object, this string should contain a valid JSON/Go\
                      \ field access statement, such as desiredState.manifest.containers[2].\
                      \ For example, if the object reference is to a container within\
                      \ a pod, this would take on a value like: \"spec.containers{name}\"\
                      \ (where \"name\" refers to the name of the container that triggered\
                      \ the event) or if no container name is specified \"spec.containers[2]\"\
                      \ (container with index 2 in this pod). This syntax is chosen\
                      \ only to have some well-defined way of referencing a part of\
                      \ an object. TODO: this design is not final and this field is\
                      \ subject to change in the future."
                    type: "string"
                  name:
                    description: "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names"
                    type: "string"
                  namespace:
                    description: "Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/"
                    type: "string"
              repoIdentifier:
                description: "RepoIdentifier is the restic repository identifier."
                type: "string"
            required:
            - "backupStorageLocation"
            - "pod"
            - "repoIdentifier"
            - "snapshotID"
            - "volume"
          status:
            description: "PodVolumeRestoreStatus is the current status of a PodVolumeRestore."
            type: "object"
            properties:
              phase:
                description: "Phase is the current state of the PodVolumeRestore."
                type: "string"
                enum:
                - "New"
                - "InProgress"
                - "Completed"
                - "Failed"
              completionTimestamp:
                nullable: true
                format: "date-time"
                description: "CompletionTimestamp records the time a restore was completed.\
                  \ Completion time is recorded even on failed restores. The server's\
                  \ time is used for CompletionTimestamps"
                type: "string"
              progress:
                description: "Progress holds the total number of bytes of the snapshot\
                  \ and the current number of restored bytes. This can be used to\
                  \ display progress information about the restore operation."
                type: "object"
                properties:
                  totalBytes:
                    format: "int64"
                    type: "integer"
                  bytesDone:
                    format: "int64"
                    type: "integer"
              message:
                description: "Message is a message about the pod volume restore's\
                  \ status."
                type: "string"
              startTimestamp:
                nullable: true
                format: "date-time"
                description: "StartTimestamp records the time a restore was started.\
                  \ The server's time is used for StartTimestamps"
                type: "string"
    subresources: {}
